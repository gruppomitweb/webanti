* --- CodePainter Revolution Batch Vers. 5.1
￼Icpbatch.CPBatch
Items=[
Icpitembatch.CPBeginEnd
comment='Parametro del'applicazione
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Variabili globale
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Variabili locali
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Variabili per invio Email
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Definizione Memory Cursor
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Setta Ambiente
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Carica il memory delle piattaforme vlt e legge dati da intermediario
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Verifica i file da lavorare
h=[
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'not(Empty(LRTrim(_piattaforme)))
]
h=[
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'pTipo='D'
]
h=[
19
19
19
]
haselse=True
next=Icpitembatch.CPExec
check='bat
frm_calc='arrt_writelog('IMPORT VLT','Scheduler','ESTRAZIONE',iif(pTipo='D',gMsgProc,_gMsgProc),"S")
obj='Exec
pag=1
prev=O22
I
obj='If
pag=1
prev=O19
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O22
fatherSonIndex=0
frm_calc='gMsgProc + 'Ora fine procedura di import: '+arfn_fdatetime(DateTime())
global=True
len=10
name='gMsgProc
nonlocal=True
obj='Var
obj_type='M
pag=1
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O22
fatherSonIndex=1
frm_calc='_gMsgProc + 'Ora fine procedura di import: '+arfn_fdatetime(DateTime())
len=10
name='_gMsgProc
obj='Var
obj_type='M
pag=1
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='If
pag=1
prev=O17
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O19
fatherSonIndex=0
h=[
19
19
]
obj='Select
pag=1
sel_field='*
sel_name='destwarn
sel_where='destwarn->DWFLGVLT='S'
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O34
fatherSonIndex=0
frm_calc='MailLibrary.sendMail(_piattaforme,'TXT','Importazione File VLT',LRTrim(_srvmail),LRTrim(destwarn->DWEMAIL),'','',LRTrim(_emlmail),'',LRTrim(_usrmail),LRTrim(_pwdmail),False,_prtmail,False,0,255,'','',False)
len=10
name='_esito
obj='Var
obj_type='M
pag=1
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=1
prev=O15
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPTransaction
father=O17
fatherSonIndex=0
next=Icpitembatch.CPTry
h=[
19
19
19
]
obj='Try
pag=1
prev=O43
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O44
fatherSonIndex=0
h=[
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'Hour(DateTime()) > _orastop and _orastop <> 0
]
h=[
19
19
]
next=Icpitembatch.CPSelect
h=[
19
19
]
next=Icpitembatch.CPTransaction
frm_calc='commit
obj='Transaction
pag=1
prev=O53
I
obj='Select
pag=1
prev=O50
sel_field='*
sel_name='cgo_vlt_impdata
sel_order='cgo_vlt_impdata->VLTIMPDATE
sel_where='cgo_vlt_impdata->VLTIMPFLAGOK1='N' and cgo_vlt_impdata->VLTIMPFLAGOK2='N' and cgo_vlt_impdata->VLTIMPFLAGOK3='N'
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O53
fatherSonIndex=0
frm_seek='Zap
name='mcVLTREP
next=Icpitembatch.CPIfElse
frm_calc=[
'mcVLTPLAT.GoToKey(cgo_vlt_impdata->VLTIMPCODPLAT)
]
h=[
19
19
]
obj='If
pag=1
prev=O58
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPBeginEnd
comment='Esegue se ci sono tutti e tre i file
father=O59
fatherSonIndex=0
h=[
19
19
]
obj='Begin
pag=1
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O64
fatherSonIndex=0
frm_calc=''S'
len=1
name='_fileok
next=Icpitembatch.CPVarDecl
frm_calc='CheckPrevFiles(cgo_vlt_impdata->VLTIMPCODPLAT,cgo_vlt_impdata->VLTIMPDATE)
len=1
name='_fileok
next=Icpitembatch.CPIfElse
frm_calc=[
'_fileok='S'
]
h=[
19
19
19
]
haselse=True
obj='If
pag=1
prev=O69
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O70
fatherSonIndex=0
frm_calc=[
'mcVLTPLAT.VPFLGCRYPTO='S'
]
h=[
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'_fileok='S'
]
h=[
19
19
19
]
haselse=True
obj='If
pag=1
prev=O75
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O78
fatherSonIndex=0
frm_calc=[
'FileLibMit.ExistFile(LRTrim(_dirbase)+"/"+LRTrim(mcVLTPLAT.VPDIRFILE)+"/"+LRTrim(cgo_vlt_impdata->VLTIMPNOMEFILE1)) and FileLibMit.ExistFile(LRTrim(_dirbase)+"/"+LRTrim(mcVLTPLAT.VPDIRFILE)+"/"+LRTrim(cgo_vlt_impdata->VLTIMPNOMEFILE2)) and FileLibMit.ExistFile(LRTrim(_dirbase)+"/"+LRTrim(mcVLTPLAT.VPDIRFILE)+"/"+LRTrim(cgo_vlt_impdata->VLTIMPNOMEFILE3))
]
h=[
19
19
]
obj='If
pag=1
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O83
fatherSonIndex=0
frm_calc='_gMsgProc + 'Ora inizio Import piattaforma '+LRTrim(mcVLTPLAT.VPDESCRI)+": "+arfn_fdatetime(DateTime()) + NL
len=10
name='_gMsgProc
next=Icpitembatch.CPIfElse
frm_calc=[
'pTipo='D'
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='mcVLTPLAT.VPIDAAMS
len=10
name='_codiceplat
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_impdata->VLTIMPDATE
len=8
name='_dataimp
next=Icpitembatch.CPVarDecl
frm_calc='mcVLTPLAT.VPCODICE
len=2
name='_platcod
next=Icpitembatch.CPVarDecl
frm_calc='mcVLTPLAT.VPFFILESPERATOR1
len=1
name='_separator
next=Icpitembatch.CPVarDecl
frm_calc='iif(mcVLTPLAT.VPFILEINTESTA1="S",1,0)
len=1
name='_intesta
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(_dirbase)+"/"+LRTrim(mcVLTPLAT.VPDIRFILE)+"/"+LRTrim(cgo_vlt_impdata->VLTIMPNOMEFILE1)
len=10
name='_nomefile
next=Icpitembatch.CPVarDecl
frm_calc='mcVLTPLAT.VFPTIPOFILE1
len=1
name='_tipofile
next=Icpitembatch.CPExec
check='page
frm_calc='2
next=Icpitembatch.CPVarDecl
frm_calc='mcVLTPLAT.VPFFILESPERATOR2
len=1
name='_separator
next=Icpitembatch.CPVarDecl
frm_calc='iif(mcVLTPLAT.VPFILEINTESTA2="S",1,0)
len=1
name='_intesta
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(_dirbase)+"/"+LRTrim(mcVLTPLAT.VPDIRFILE)+"/"+LRTrim(cgo_vlt_impdata->VLTIMPNOMEFILE2)
len=10
name='_nomefile
next=Icpitembatch.CPVarDecl
frm_calc='mcVLTPLAT.VFPTIPOFILE2
len=1
name='_tipofile
next=Icpitembatch.CPExec
check='page
frm_calc='3
next=Icpitembatch.CPVarDecl
frm_calc='mcVLTPLAT.VPFFILESPERATOR3
len=1
name='_separator
next=Icpitembatch.CPVarDecl
frm_calc='iif(mcVLTPLAT.VPFILEINTESTA3="S",1,0)
len=1
name='_intesta
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(_dirbase)+"/"+LRTrim(mcVLTPLAT.VPDIRFILE)+"/"+LRTrim(cgo_vlt_impdata->VLTIMPNOMEFILE3)
len=10
name='_nomefile
next=Icpitembatch.CPVarDecl
frm_calc='mcVLTPLAT.VFPTIPOFILE3
len=1
name='_tipofile
next=Icpitembatch.CPExec
check='page
frm_calc='4
next=Icpitembatch.CPBeginEnd
comment='Scrive i dati del memory cursor sul file per i report
h=[
19
19
]
next=Icpitembatch.CPWrite
arch='cgo_vlt_impdata
next=Icpitembatch.CPVarDecl
frm_calc='_gMsgProc + 'Ora fine Import piattaforma '+LRTrim(mcVLTPLAT.VPDESCRI)+": "+arfn_fdatetime(DateTime()) + NL
len=10
name='_gMsgProc
next=Icpitembatch.CPIfElse
frm_calc=[
'pTipo='D'
]
h=[
19
19
]
obj='If
pag=1
prev=O113
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O114
fatherSonIndex=0
frm_calc='gMsgProc + _gMsgProc
global=True
len=10
name='gMsgProc
nonlocal=True
obj='Var
obj_type='M
pag=1
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='M
pag=1
prev=O112
var_op='asgn
I
obj='Write
pag=1
prev=O110
rd_kfield=[
'VLTIMPDATE
'VLTIMPCODPLAT
'VLTIMPNOMEFILE1
'VLTIMPNOMEFILE2
'VLTIMPNOMEFILE3
]
rd_kop=[
'=
'=
'=
'=
'=
]
rd_kvar=[
'cgo_vlt_impdata->VLTIMPDATE
'cgo_vlt_impdata->VLTIMPCODPLAT
'cgo_vlt_impdata->VLTIMPNOMEFILE1
'cgo_vlt_impdata->VLTIMPNOMEFILE2
'cgo_vlt_impdata->VLTIMPNOMEFILE3
]
wr_field=[
'VLTIMPFLAGOK1
'VLTIMPFLAGOK2
'VLTIMPFLAGOK3
]
wr_op=[
'=
'=
'=
]
wr_var=[
''S'
''S'
''S'
]
I
obj='Begin
pag=1
prev=O109
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPForEach
father=O110
fatherSonIndex=0
for_variable='rwVLTREP
for_variable_type='cgo_vlt_report
h=[
19
19
]
iterator_expr='mcVLTREP
obj='ForEach
pag=1
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O129
fatherSonIndex=0
frm_calc='0
len=20
name='_prog
next=Icpitembatch.CPRead
arch='cgo_vlt_report
next=Icpitembatch.CPIfElse
frm_calc=[
'_prog=0
]
h=[
19
19
19
]
haselse=True
obj='If
pag=1
prev=O134
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O135
fatherSonIndex=0
frm_calc='Utilities.GetAutonumber("PRGVLTREP\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prog
next=Icpitembatch.CPInsert
arch='cgo_vlt_report
obj='Insert
pag=1
prev=O140
rd_kfield=[
'VLTREP_IDPROG
'VLTREP_AAMSSALA
'VLTREP_CODCONC
'VLTREP_CODPLAT
'VLTREP_AAMSVLT
'VLTREP_IDTICKET
'VLTREP_VALNOM
'VLTREP_DATAEMI
'VLTREP_DATACONV
'VLTREP_IMPBET
'VLTREP_GROSWIN
'VLTREP_NETWIN
'VLTREP_TOTALE
'VLTREP_RAPPORTO1
'VLTREP_RAPPORTO2
'VLTREP_RAPPORTO3
'VLTREP_TICKET_BC
'VLTREP_ORIGINE
]
rd_kvar=[
'_prog
'rwVLTREP.VLTREP_AAMSSALA
'rwVLTREP.VLTREP_CODCONC
'rwVLTREP.VLTREP_CODPLAT
'rwVLTREP.VLTREP_AAMSVLT
'rwVLTREP.VLTREP_IDTICKET
'rwVLTREP.VLTREP_VALNOM
'rwVLTREP.VLTREP_DATAEMI
'rwVLTREP.VLTREP_DATACONV
'rwVLTREP.VLTREP_IMPBET
'rwVLTREP.VLTREP_GROSWIN
'rwVLTREP.VLTREP_NETWIN
'rwVLTREP.VLTREP_TOTALE
'rwVLTREP.VLTREP_RAPPORTO1
'rwVLTREP.VLTREP_RAPPORTO2
'rwVLTREP.VLTREP_RAPPORTO3
'rwVLTREP.VLTREP_TICKET_BC
'rwVLTREP.VLTREP_ORIGINE
]
I
obj='Var
obj_type='N
pag=1
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPWrite
arch='cgo_vlt_report
father=O135
fatherSonIndex=1
obj='Write
pag=1
rd_kfield=[
'VLTREP_IDPROG
]
rd_kop=[
'=
]
rd_kvar=[
'_prog
]
wr_field=[
'VLTREP_AAMSSALA
'VLTREP_CODCONC
'VLTREP_CODPLAT
'VLTREP_AAMSVLT
'VLTREP_IDTICKET
'VLTREP_VALNOM
'VLTREP_DATAEMI
'VLTREP_DATACONV
'VLTREP_IMPBET
'VLTREP_GROSWIN
'VLTREP_NETWIN
'VLTREP_TOTALE
'VLTREP_RAPPORTO1
'VLTREP_RAPPORTO2
'VLTREP_RAPPORTO3
'VLTREP_TICKET_BC
'VLTREP_ORIGINE
]
wr_op=[
'=
'=
'=
'=
'=
'=
'=
'=
'=
'=
'=
'=
'=
'=
'=
'=
'=
]
wr_var=[
'rwVLTREP.VLTREP_AAMSSALA
'rwVLTREP.VLTREP_CODCONC
'rwVLTREP.VLTREP_CODPLAT
'rwVLTREP.VLTREP_AAMSVLT
'rwVLTREP.VLTREP_IDTICKET
'rwVLTREP.VLTREP_VALNOM
'rwVLTREP.VLTREP_DATAEMI
'rwVLTREP.VLTREP_DATACONV
'rwVLTREP.VLTREP_IMPBET
'rwVLTREP.VLTREP_GROSWIN
'rwVLTREP.VLTREP_NETWIN
'rwVLTREP.VLTREP_TOTALE
'rwVLTREP.VLTREP_RAPPORTO1
'rwVLTREP.VLTREP_RAPPORTO2
'rwVLTREP.VLTREP_RAPPORTO3
'rwVLTREP.VLTREP_TICKET_BC
'rwVLTREP.VLTREP_ORIGINE
]
I
I
]
w=[
150
150
150
]
I
obj='Read
pag=1
prev=O133
rd_field=[
'VLTREP_IDPROG
]
rd_kfield=[
'VLTREP_AAMSSALA
'VLTREP_CODPLAT
'VLTREP_AAMSVLT
'VLTREP_IDTICKET
'VLTREP_DATAEMI
'VLTREP_DATACONV
]
rd_kvar=[
'rwVLTREP.VLTREP_AAMSSALA
'rwVLTREP.VLTREP_CODPLAT
'rwVLTREP.VLTREP_AAMSVLT
'rwVLTREP.VLTREP_IDTICKET
'rwVLTREP.VLTREP_DATAEMI
'rwVLTREP.VLTREP_DATACONV
]
rd_var=[
'_prog
]
I
obj='Var
obj_type='N
pag=1
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Exec
pag=1
prev=O108
I
obj='Var
pag=1
prev=O107
var_op='asgn
I
obj='Var
obj_type='M
pag=1
prev=O106
var_op='asgn
I
obj='Var
obj_type='N
pag=1
prev=O105
var_op='asgn
I
obj='Var
pag=1
prev=O104
var_op='asgn
I
obj='Exec
pag=1
prev=O103
I
obj='Var
pag=1
prev=O102
var_op='asgn
I
obj='Var
obj_type='M
pag=1
prev=O101
var_op='asgn
I
obj='Var
obj_type='N
pag=1
prev=O100
var_op='asgn
I
obj='Var
pag=1
prev=O99
var_op='asgn
I
obj='Exec
pag=1
prev=O98
I
obj='Var
pag=1
prev=O97
var_op='asgn
I
obj='Var
obj_type='M
pag=1
prev=O96
var_op='asgn
I
obj='Var
obj_type='N
pag=1
prev=O95
var_op='asgn
I
obj='Var
pag=1
prev=O94
var_op='asgn
I
obj='Var
pag=1
prev=O93
var_op='asgn
I
obj='Var
obj_type='D
pag=1
prev=O92
var_op='asgn
I
obj='Var
pag=1
prev=O89
var_op='asgn
I
obj='If
pag=1
prev=O88
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O89
fatherSonIndex=0
frm_calc='gMsgProc + _gMsgProc
global=True
len=10
name='gMsgProc
nonlocal=True
obj='Var
obj_type='M
pag=1
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='M
pag=1
var_op='asgn
I
I
]
w=[
150
150
]
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O78
fatherSonIndex=1
frm_calc='_piattaforme + 'Controllo fallito dei file della piattaforma: '+LRTrim(mcVLTPLAT.VPDESCRI) + NL
len=10
name='_piattaforme
obj='Var
obj_type='M
pag=1
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='If
pag=1
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O75
fatherSonIndex=0
frm_calc='cgo_vlt_impdata->VLTIMPNOMEFILE1
frm_seek='NOMEFILE1
name='rowVLTPLAT
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_impdata->VLTIMPNOMEFILE2
frm_seek='NOMEFILE2
name='rowVLTPLAT
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_impdata->VLTIMPNOMEFILE3
frm_seek='NOMEFILE3
name='rowVLTPLAT
next=Icpitembatch.CPVarDecl
frm_calc='mcVLTPLAT.VPDIRFILE
frm_seek='NOMEDIR
name='rowVLTPLAT
next=Icpitembatch.CPVarDecl
frm_calc='mcVLTPLAT.VFPKAYCRYPTO
frm_seek='CRYPPTOKEY
name='rowVLTPLAT
next=Icpitembatch.CPVarDecl
frm_calc='_dirbase
frm_seek='DIRBASE
name='rowVLTPLAT
next=Icpitembatch.CPVarDecl
frm_calc='CheckFiles(rowVLTPLAT)
len=1
name='_fileok
obj='Var
pag=1
prev=O174
var_op='asgn
I
obj='Var
obj_type='R
pag=1
prev=O173
var_op='prop
I
obj='Var
obj_type='R
pag=1
prev=O172
var_op='prop
I
obj='Var
obj_type='R
pag=1
prev=O171
var_op='prop
I
obj='Var
obj_type='R
pag=1
prev=O170
var_op='prop
I
obj='Var
obj_type='R
pag=1
prev=O169
var_op='prop
I
obj='Var
obj_type='R
pag=1
var_op='prop
I
I
]
w=[
150
150
]
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O70
fatherSonIndex=1
frm_calc=''Esistono vecchi file non importati della seguente piattaforma: '+NL+NL+LRTrim(mcVLTPLAT.VPDESCRI)
len=10
name='_piattaforme
obj='Var
obj_type='M
pag=1
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='Var
pag=1
prev=O68
var_op='asgn
I
obj='Var
pag=1
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='MC
pag=1
var_op='meth
I
I
]
w=[
150
150
]
I
obj='If
pag=1
prev=O48
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O50
fatherSonIndex=0
frm_calc='''
len=10
name='_piattaforme
next=Icpitembatch.CPSelect
h=[
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'not(Empty(LRTrim(_piattaforme)))
]
h=[
19
19
]
obj='If
pag=1
prev=O186
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O188
fatherSonIndex=0
frm_calc=''Non sono stati importati i file delle seguenti piattaforme: '+NL+NL+_piattaforme
len=10
name='_piattaforme
next=Icpitembatch.CPSelect
h=[
19
19
]
obj='Select
pag=1
prev=O193
sel_field='*
sel_name='destwarn
sel_where='destwarn->DWFLGVLT='S'
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O194
fatherSonIndex=0
frm_calc='MailLibrary.sendMail(_piattaforme,'TXT','Importazione File VLT',LRTrim(_srvmail),LRTrim(destwarn->DWEMAIL),'','',LRTrim(_emlmail),'',LRTrim(_usrmail),LRTrim(_pwdmail),False,_prtmail,False,0,255,'','',False)
len=10
name='_esito
obj='Var
obj_type='M
pag=1
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='M
pag=1
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Select
pag=1
prev=O185
sel_field='*
sel_name='cgo_vlt_impdata
sel_where='cgo_vlt_impdata->VLTIMPFLAGOK1='N' and cgo_vlt_impdata->VLTIMPFLAGOK2='N' and cgo_vlt_impdata->VLTIMPFLAGOK3='N'
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O186
fatherSonIndex=0
frm_calc=[
'mcVLTPLAT.GoToKey(cgo_vlt_impdata->VLTIMPCODPLAT)
]
h=[
19
19
]
obj='If
pag=1
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O203
fatherSonIndex=0
frm_calc='_piattaforme + LRTrim(mcVLTPLAT.VPDESCRI) +" - File: "+LRTrim(cgo_vlt_impdata->VLTIMPNOMEFILE1)+", "+LRTrim(cgo_vlt_impdata->VLTIMPNOMEFILE2)+", "+LRTrim(cgo_vlt_impdata->VLTIMPNOMEFILE3) + NL
len=10
name='_piattaforme
obj='Var
obj_type='M
pag=1
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='M
pag=1
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Select
pag=1
sel_field='*
sel_name='cgo_vltplat
sel_where='cgo_vltplat->VFPFLAGIMPORT='S'
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O48
fatherSonIndex=0
frm_calc='NullDate()
len=8
name='_dataoggi
next=Icpitembatch.CPRead
arch='cgo_vlt_impdata
next=Icpitembatch.CPIfElse
frm_calc=[
'Empty(_dataoggi)
]
h=[
19
19
]
obj='If
pag=1
prev=O215
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPInsert
arch='cgo_vlt_impdata
father=O216
fatherSonIndex=0
obj='Insert
pag=1
rd_kfield=[
'VLTIMPDATE
'VLTIMPCODPLAT
'VLTIMPFLAGOK1
'VLTIMPFLAGOK2
'VLTIMPFLAGOK3
'VLTIMPNOMEFILE1
'VLTIMPNOMEFILE2
'VLTIMPNOMEFILE3
]
rd_kvar=[
'Date()
'cgo_vltplat->VPCODICE
''N'
''N'
''N'
'iif(not(Empty(cgo_vltplat->VPPREFFILE1)),arfn_cgo_nomefile_vlt(cgo_vltplat->VPFLGPRESUF1,cgo_vltplat->VPPREFFILE1,cgo_vltplat->VPFILEFORDATA1,arfn_dateminus(Date(),1)),'')
'iif(not(Empty(cgo_vltplat->VPPREFFILE2)),arfn_cgo_nomefile_vlt(cgo_vltplat->VPFLGPRESUF2,cgo_vltplat->VPPREFFILE2,cgo_vltplat->VPFILEFORDATA2,arfn_dateminus(Date(),1)),'')
'iif(not(Empty(cgo_vltplat->VPPREFFILE3)),arfn_cgo_nomefile_vlt(cgo_vltplat->VPFLGPRESUF3,cgo_vltplat->VPPREFFILE3,cgo_vltplat->VPFILEFORDATA3,arfn_dateminus(Date(),1)),'')
]
I
I
]
w=[
150
150
]
I
obj='Read
pag=1
prev=O214
rd_field=[
'VLTIMPDATE
]
rd_kfield=[
'VLTIMPDATE
'VLTIMPCODPLAT
]
rd_kvar=[
'Date()
'cgo_vltplat->VPCODICE
]
rd_var=[
'_dataoggi
]
I
obj='Var
obj_type='D
pag=1
var_op='asgn
I
I
]
w=[
150
150
]
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPTransaction
father=O44
fatherSonIndex=1
frm_calc='rollback
obj='Transaction
pag=1
I
I
]
w=[
150
150
150
]
I
obj='Transaction
pag=1
I
I
]
w=[
150
150
]
I
obj='Begin
pag=1
prev=O13
sons=[
Icpitembatch.CPItemSon
instr=Ispitembatch.CPMemoryCursor
data_source='anadip
father=O15
fatherSonIndex=0
key_expression='LRTrim(anadip->CODICEAAMS)
mem_curs_name='mcANADIP
next=Ispitembatch.CPMemoryCursor
data_source='cgo_vltplat
key_expression='cgo_vltplat->VPCODICE
mem_curs_name='mcVLTPLAT
next=Icpitembatch.CPSelect
h=[
19
19
]
obj='Select
pag=1
prev=O237
sel_field='*
sel_name='intermbo
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O238
fatherSonIndex=0
frm_calc='intermbo->SOPATHIMPORT
len=120
name='_dirbase
next=Icpitembatch.CPVarDecl
frm_calc='intermbo->SOORAIMPORT
len=2
name='_orastop
next=Icpitembatch.CPVarDecl
frm_calc='intermbo->ALTSRVMAIL
len=50
name='_srvmail
next=Icpitembatch.CPVarDecl
frm_calc='iif(Empty(LRTrim(intermbo->ALTPRTMAIL)),25,Val(LRTrim(intermbo->ALTPRTMAIL)))
len=5
name='_prtmail
next=Icpitembatch.CPVarDecl
frm_calc='intermbo->ALTEMLMAIL
len=50
name='_emlmail
next=Icpitembatch.CPVarDecl
frm_calc='intermbo->ALTUSRMAIL
len=50
name='_usrmail
next=Icpitembatch.CPVarDecl
frm_calc='intermbo->ALTPWDMAIL
len=30
name='_pwdmail
next=Icpitembatch.CPVarDecl
frm_calc='intermbo->RICEVUTE
len=10
name='_gPathDoc
obj='Var
obj_type='M
pag=1
prev=O248
var_op='asgn
I
obj='Var
pag=1
prev=O247
var_op='asgn
I
obj='Var
pag=1
prev=O246
var_op='asgn
I
obj='Var
pag=1
prev=O245
var_op='asgn
I
obj='Var
obj_type='N
pag=1
prev=O244
var_op='asgn
I
obj='Var
pag=1
prev=O243
var_op='asgn
I
obj='Var
obj_type='N
pag=1
prev=O242
var_op='asgn
I
obj='Var
pag=1
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='MemoryCursor
pag=1
prev=O236
sel_field='*
sel_name='cgo_vltplat
sel_type='fltb
I
obj='MemoryCursor
pag=1
sel_field='*
sel_name='anadip
sel_type='fltb
I
I
]
w=[
150
150
]
I
obj='Begin
pag=1
prev=O11
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O13
fatherSonIndex=0
frm_calc=[
'pTipo='B'
]
h=[
19
19
19
]
haselse=True
obj='If
pag=1
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPExec
father=O254
fatherSonIndex=0
frm_calc='Utilities.SetUserCode(1)
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetCompany()
len=10
name='_oldazi
next=Icpitembatch.CPSelect
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc=''Ora inizio procedura di import: '+arfn_fdatetime(DateTime()) + NL
len=10
name='_gMsgProc
obj='Var
obj_type='M
pag=1
prev=O261
var_op='asgn
I
obj='Select
pag=1
prev=O260
sel_field='*
sel_name='cpazi
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPExec
father=O261
fatherSonIndex=0
frm_calc='Utilities.SetCompany(LRTrim(cpazi->codazi))
next=Icpitembatch.CPVarDecl
comment='Azienda
frm_calc='LRTrim(cpazi->codazi)
len=10
name='_gAzienda
obj='Var
pag=1
prev=O266
var_op='asgn
I
obj='Exec
pag=1
I
I
]
w=[
150
150
]
I
obj='Var
pag=1
prev=O259
var_op='asgn
I
obj='Exec
pag=1
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O254
fatherSonIndex=1
frm_calc='gAzienda
len=10
name='_oldazi
next=Icpitembatch.CPVarDecl
comment='Azienda
frm_calc='gAzienda
len=10
name='_gAzienda
next=Icpitembatch.CPVarDecl
frm_calc=''Ora inizio procedura di import: '+arfn_fdatetime(DateTime())
global=True
len=10
name='gMsgProc
nonlocal=True
obj='Var
obj_type='M
pag=1
prev=O271
var_op='asgn
I
obj='Var
pag=1
prev=O270
var_op='asgn
I
obj='Var
pag=1
var_op='asgn
I
I
]
w=[
150
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=1
prev=O9
sons=[
Icpitembatch.CPItemSon
collapsed=True
instr=Icpitembatch.CPVarDecl
father=O11
fatherSonIndex=0
frm_seek='cgo_vltplat
name='mcVLTPLAT
next=Icpitembatch.CPVarDecl
frm_seek='anadip
name='mcANADIP
next=Icpitembatch.CPVarDecl
frm_seek='cgo_vlt_report
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='rwCHECK.MCRDef
name='rowVLTPLAT
obj='Var
obj_type='R
pag=1
prev=O279
I
obj='Var
obj_type='MC
pag=1
prev=O278
I
obj='Var
obj_type='MC
pag=1
prev=O277
I
obj='Var
obj_type='MC
pag=1
I
I
]
w=[
150
150
]
I
obj='Begin
pag=1
prev=O7
sons=[
Icpitembatch.CPItemSon
collapsed=True
instr=Icpitembatch.CPVarDecl
father=O9
fatherSonIndex=0
len=50
name='_srvmail
next=Icpitembatch.CPVarDecl
len=5
name='_prtmail
next=Icpitembatch.CPVarDecl
len=50
name='_emlmail
next=Icpitembatch.CPVarDecl
len=50
name='_usrmail
next=Icpitembatch.CPVarDecl
len=30
name='_pwdmail
next=Icpitembatch.CPVarDecl
len=10
name='_esito
obj='Var
obj_type='M
pag=1
prev=O288
I
obj='Var
pag=1
prev=O287
I
obj='Var
pag=1
prev=O286
I
obj='Var
pag=1
prev=O285
I
obj='Var
obj_type='N
pag=1
prev=O284
I
obj='Var
pag=1
I
I
]
w=[
150
150
]
I
obj='Begin
pag=1
prev=O5
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O7
fatherSonIndex=0
len=10
name='_tot
next=Icpitembatch.CPVarDecl
len=120
name='_dirbase
next=Icpitembatch.CPVarDecl
len=2
name='_orastop
next=Icpitembatch.CPVarDecl
len=10
name='_rownum
next=Icpitembatch.CPVarDecl
len=10
name='_nomefile
next=Icpitembatch.CPVarDecl
len=1
name='_tipofile
next=Icpitembatch.CPVarDecl
len=10
name='_codiceplat
next=Icpitembatch.CPVarDecl
len=20
name='_prog
next=Icpitembatch.CPVarDecl
len=15
name='_prgtele
next=Icpitembatch.CPVarDecl
len=10
name='_gAzienda
next=Icpitembatch.CPVarDecl
len=10
name='_gPathDoc
next=Icpitembatch.CPVarDecl
len=10
name='_oldazi
next=Icpitembatch.CPVarDecl
len=1
name='_separator
next=Icpitembatch.CPVarDecl
len=1
name='_intesta
next=Icpitembatch.CPVarDecl
len=2
name='_platcod
next=Icpitembatch.CPVarDecl
len=6
name='_coddip
next=Icpitembatch.CPVarDecl
dec=5
len=10
name='_rapgino
next=Icpitembatch.CPVarDecl
dec=5
len=10
name='_rapgiin
next=Icpitembatch.CPVarDecl
dec=5
len=10
name='_rapvino
next=Icpitembatch.CPVarDecl
len=50
name='_idticket
next=Icpitembatch.CPVarDecl
len=50
name='_idsala
next=Icpitembatch.CPVarDecl
len=14
name='_dataemi
next=Icpitembatch.CPVarDecl
len=50
name='_idvlt
next=Icpitembatch.CPVarDecl
len=10
name='_piattaforme
next=Icpitembatch.CPVarDecl
len=1
name='_fileok
next=Icpitembatch.CPVarDecl
len=10
name='_gMsgProc
next=Icpitembatch.CPVarDecl
len=20
name='cProg
next=Icpitembatch.CPVarDecl
len=8
name='_dataoggi
next=Icpitembatch.CPVarDecl
len=50
name='_vltemi
next=Icpitembatch.CPVarDecl
dec=2
len=12
name='_nomemi
next=Icpitembatch.CPVarDecl
dec=2
len=12
name='_nomses
next=Icpitembatch.CPVarDecl
dec=2
len=12
name='_nomcon
next=Icpitembatch.CPVarDecl
dec=2
len=12
name='_nomout
next=Icpitembatch.CPVarDecl
len=8
name='_dataimp
next=Icpitembatch.CPVarDecl
len=20
name='_prgscarti
obj='Var
obj_type='N
pag=1
prev=O326
I
obj='Var
obj_type='D
pag=1
prev=O325
I
obj='Var
obj_type='N
pag=1
prev=O324
I
obj='Var
obj_type='N
pag=1
prev=O323
I
obj='Var
obj_type='N
pag=1
prev=O322
I
obj='Var
obj_type='N
pag=1
prev=O321
I
obj='Var
pag=1
prev=O320
I
obj='Var
obj_type='D
pag=1
prev=O319
I
obj='Var
pag=1
prev=O318
I
obj='Var
obj_type='M
pag=1
prev=O317
I
obj='Var
pag=1
prev=O316
I
obj='Var
obj_type='M
pag=1
prev=O315
I
obj='Var
pag=1
prev=O314
I
obj='Var
obj_type='T
pag=1
prev=O313
I
obj='Var
pag=1
prev=O312
I
obj='Var
pag=1
prev=O311
I
obj='Var
obj_type='N
pag=1
prev=O310
I
obj='Var
obj_type='N
pag=1
prev=O309
I
obj='Var
obj_type='N
pag=1
prev=O308
I
obj='Var
pag=1
prev=O307
I
obj='Var
pag=1
prev=O306
I
obj='Var
obj_type='N
pag=1
prev=O305
I
obj='Var
pag=1
prev=O304
I
obj='Var
pag=1
prev=O303
I
obj='Var
obj_type='M
pag=1
prev=O302
I
obj='Var
pag=1
prev=O301
I
obj='Var
pag=1
prev=O300
I
obj='Var
obj_type='N
pag=1
prev=O299
I
obj='Var
pag=1
prev=O298
I
obj='Var
pag=1
prev=O297
I
obj='Var
obj_type='M
pag=1
prev=O296
I
obj='Var
obj_type='N
pag=1
prev=O295
I
obj='Var
obj_type='N
pag=1
prev=O294
I
obj='Var
pag=1
prev=O293
I
obj='Var
obj_type='N
pag=1
I
I
]
w=[
150
150
]
I
obj='Begin
pag=1
prev=O3
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
comment='Azienda
father=O5
fatherSonIndex=0
global=True
len=10
name='gAzienda
next=Icpitembatch.CPVarDecl
global=True
len=120
name='gMsgImp
next=Icpitembatch.CPVarDecl
global=True
len=10
name='gMsgProc
next=Icpitembatch.CPVarDecl
global=True
len=10
name='gPathDoc
nonlocal=True
obj='Var
obj_type='M
pag=1
prev=O333
I
nonlocal=True
obj='Var
obj_type='M
pag=1
prev=O332
I
nonlocal=True
obj='Var
pag=1
prev=O331
I
nonlocal=True
obj='Var
pag=1
I
I
]
w=[
150
150
]
I
obj='Begin
pag=1
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
comment='Tipo (Batch - Diretto) 
father=O3
fatherSonIndex=0
len=1
name='pTipo
obj='Var
pag=1
param=True
I
I
]
w=[
150
150
]
x=12
y=20
I
Icpitembatch.CPVarDecl
frm_calc='0
len=10
name='_tot
next=Icpitembatch.CPSelect
h=[
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'_tot=0
]
h=[
19
19
]
obj='If
pag=1
prev=O341
sons=[
Icpitembatch.CPItemSon
I
]
w=[
150
150
]
I
obj='Select
pag=1
par_expr=[
''cgo_vlt_impdata'
''VLTIMPCODPLAT'
''VLTIMPDATE'
'Date()
'Date()
]
par_name=[
'tbname
'fldname
'parname
'parval
'parval2
]
prev=O340
sel_name='qbe_tab_mmc_da_a_data_filter
sel_type='sqry
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O341
fatherSonIndex=0
frm_calc='qbe_tab_mmc_da_a_data_filter->tot
len=10
name='_tot
obj='Var
obj_type='N
pag=1
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='N
pag=1
var_op='asgn
x=1303
y=2224
I
Icpitembatch.CPBeginEnd
comment='Parametro
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Variabili Locali
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Converte data ora da carattere a DateTime
h=[
19
19
]
next=Ispitembatch.CPReturn
frm_calc='dtRitorno
obj='Return
pag=5
page_return=True
prev=O359
I
obj='Begin
pag=5
prev=O357
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O359
fatherSonIndex=0
frm_calc=[
'pFormato=1
]
h=[
19
19
19
]
haselse=True
next=Icpitembatch.CPVarDecl
frm_calc='Substr(pDataOra,12,2)+Substr(pDataOra,15,2)+Substr(pDataOra,18,2)
len=6
name='_ora
next=Icpitembatch.CPVarDecl
frm_calc='CharToDateTime(LRTrim(_data)+LRTrim(_ora))
len=14
name='dtRitorno
obj='Var
obj_type='T
pag=5
pagelocal=True
prev=O367
var_op='asgn
I
obj='Var
pag=5
pagelocal=True
prev=O364
var_op='asgn
I
obj='If
pag=5
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O364
fatherSonIndex=0
frm_calc='Left(pDataOra,4)+Substr(pDataOra,6,2)+Substr(pDataOra,9,2)
len=8
name='_data
obj='Var
pag=5
pagelocal=True
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O364
fatherSonIndex=1
frm_calc='Substr(pDataOra,7,4)+Substr(pDataOra,4,2)+Left(pDataOra,2)
len=8
name='_data
obj='Var
pag=5
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=5
prev=O355
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O357
fatherSonIndex=0
len=8
name='_data
next=Icpitembatch.CPVarDecl
len=6
name='_ora
next=Icpitembatch.CPVarDecl
len=14
name='dtRitorno
obj='Var
obj_type='T
pag=5
pagelocal=True
prev=O379
I
obj='Var
pag=5
pagelocal=True
prev=O378
I
obj='Var
pag=5
pagelocal=True
I
I
]
w=[
150
150
]
I
obj='Begin
pag=5
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O355
fatherSonIndex=0
len=20
name='pDataOra
next=Icpitembatch.CPVarDecl
len=1
name='pFormato
obj='Var
obj_type='N
pag=5
pageparam=True
prev=O384
I
obj='Var
pag=5
pageparam=True
I
I
]
w=[
150
150
]
x=16
y=13
I
Icpitembatch.CPBeginEnd
comment='Crea il lettore del file CSV
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Tipo Spielo
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Tipo Novomatic
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Tipo Playtech
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Tipo Inspired
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='_gMsgProc + 'Sono state importati '+LRTrim(Str(_rownum,10,0)) +' biglietti emessi per la piattaforma '  + LRTrim(_codiceplat)
len=10
name='_gMsgProc
next=Icpitembatch.CPIfElse
frm_calc=[
'pTipo='D'
]
h=[
19
19
]
obj='If
pag=3
prev=O397
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O398
fatherSonIndex=0
frm_calc='gMsgProc + _gMsgProc
global=True
len=10
name='gMsgProc
nonlocal=True
obj='Var
obj_type='M
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='M
pag=3
prev=O395
var_op='asgn
I
obj='Begin
pag=3
prev=O393
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O395
fatherSonIndex=0
frm_calc=[
'_tipofile='I'
]
h=[
19
19
]
obj='If
pag=3
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O407
fatherSonIndex=0
frm_calc='0
len=10
name='_rownum
next=Icpitembatch.CPExec
check='man
frm_calc='// Legge il csv e scrive la tabella﷯String [] nextLine;﷯while ((nextLine = reader.readNext()) != null) {
next=Icpitembatch.CPIfElse
frm_calc=[
'Len(LRTrim(nextLine[0])) = 10 and (LRTrim(nextLine[7])="VALID" or LRTrim(nextLine[7])="REDEEMED")
]
h=[
19
19
]
next=Icpitembatch.CPExec
check='man
frm_calc='}﷯// Chiuse il file﷯reader.close();
obj='Exec
pag=3
prev=O414
I
obj='If
pag=3
prev=O413
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O414
fatherSonIndex=0
frm_calc='0
len=20
name='_prog
next=Icpitembatch.CPRead
arch='cgo_vlt_emessi
next=Icpitembatch.CPIfElse
frm_calc=[
'_prog=0
]
h=[
19
19
]
obj='If
pag=3
prev=O421
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O422
fatherSonIndex=0
frm_calc='Utilities.GetAutonumber("PRGVLTEMI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prog
next=Icpitembatch.CPVarDecl
frm_calc='Strtran(LRTrim(nextLine[8])," ",'')
len=50
name='_idticket
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[3])
len=50
name='_idsala
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[5])
len=50
name='_idvlt
next=Icpitembatch.CPVarDecl
frm_calc='NullDateTime()
len=14
name='_dataemi
next=Icpitembatch.CPRead
arch='cgo_vlt_sessioni
next=Icpitembatch.CPInsert
arch='cgo_vlt_emessi
next=Icpitembatch.CPWrite
arch='cgo_vlt_sessioni
next=Icpitembatch.CPVarDecl
frm_calc='_rownum + 1
len=10
name='_rownum
next=Icpitembatch.CPIfElse
frm_calc=[
'(Empty(LRTrim(nextLine[4])) or Left(LRTrim(nextLine[4]),1)='P') and (Val(nextLine[6]) / 100) >= 500 
]
h=[
19
19
]
obj='If
pag=3
prev=O435
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O436
fatherSonIndex=0
frm_calc='''
len=6
name='_coddip
next=Icpitembatch.CPIfElse
frm_calc=[
'mcANADIP.GoToKey(LRTrim(nextLine[3]))
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGTELEMATICO\'"+LRTrim(_gAzienda)+"'","",15)
len=15
name='_prgtele
next=Icpitembatch.CPInsert
arch='cgo_telematico
next=Icpitembatch.CPSelect
h=[
19
19
]
obj='Select
pag=3
prev=O446
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_TICKET_BC=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O447
fatherSonIndex=0
frm_calc='LRTrim(_idticket)
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[3])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''COGETECH'
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='nextLine[4]
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[9])
frm_seek='VLTREP_TICKET_BC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='Strtran(LRTrim(nextLine[8])," ",'')
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='0
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='0
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='0
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''E'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=3
prev=O467
var_op='meth
I
obj='Var
obj_type='MC
pag=3
prev=O466
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O465
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O464
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O463
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O462
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O461
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O460
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O459
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O458
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O457
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O456
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O455
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O454
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O453
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O452
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O451
var_op='prop
I
obj='Var
obj_type='MC
pag=3
var_op='meth
I
I
]
w=[
150
150
]
I
obj='Insert
pag=3
prev=O445
rd_kfield=[
'SNAINUMOPE
'ENV
'CODDIPE
'TOTLIRE
'CACODICE
'CADATAORA
'CAIDBIGLIETTO
'TIPOGIOCO
'CODLOB
'VPCODICE
]
rd_kvar=[
''V'+Right(LRTrim(_prgtele),14)
''V'
'_coddip
'Val(nextLine[6]) / 100
''1'
'_dataemi
'Strtran(LRTrim(nextLine[8])," ",'')
''V'
''VLT'
'_platcod
]
I
obj='Var
pag=3
prev=O442
var_op='asgn
I
obj='If
pag=3
prev=O441
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O442
fatherSonIndex=0
frm_calc='mcANADIP.CODDIP
len=6
name='_coddip
obj='Var
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='N
pag=3
prev=O434
var_op='asgn
I
obj='Write
pag=3
prev=O433
rd_kfield=[
'VLTSES_TICKET_BC
'VLTSES_IDSESSIONE
]
rd_kop=[
'=
'=
]
rd_kvar=[
'Strtran(LRTrim(nextLine[9])," ",'')
'LRTrim(nextLine[10])
]
wr_field=[
'VLTSES_IDTICKETOUT
]
wr_op=[
'=
]
wr_var=[
'Strtran(LRTrim(nextLine[8])," ",'')
]
I
obj='Insert
pag=3
prev=O432
rd_kfield=[
'VLTEME_IDPROG
'VLTEME_PIATTAFORMA
'VLTEME_IDTICKETOUT
'VLTEME_SALA
'VLTEME_VLT
'VLTEME_IMPORTO
'VLTEME_TICKET_BC
'VLTEME_DATEMI
'VLTEME_IDSESSIONE
]
rd_kvar=[
'_prog
'_codiceplat
'Strtran(LRTrim(nextLine[8])," ",'')
'nextLine[3]
'nextLine[4]
'Val(nextLine[6]) / 100
'Strtran(LRTrim(nextLine[9])," ",'')
'_dataemi
'nextLine[10]
]
I
obj='Read
pag=3
prev=O431
rd_field=[
'VLTSES_DATAEMI
]
rd_kfield=[
'VLTSES_PIATTAFORMA
'VLTSES_TICKET_BC
'VLTSES_SALA
'VLTSES_IDSESSIONE
]
rd_kvar=[
'_codiceplat
'_idticket
'_idsala
'LRTrim(nextLine[10])
]
rd_var=[
'_dataemi
]
I
obj='Var
obj_type='T
pag=3
prev=O430
var_op='asgn
I
obj='Var
pag=3
prev=O429
var_op='asgn
I
obj='Var
pag=3
prev=O428
var_op='asgn
I
obj='Var
pag=3
prev=O427
var_op='asgn
I
obj='Var
obj_type='N
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Read
pag=3
prev=O420
rd_field=[
'VLTEME_IDPROG
]
rd_kfield=[
'VLTEME_TICKET_BC
]
rd_kvar=[
'Strtran(LRTrim(nextLine[9])," ",'')
]
rd_var=[
'_prog
]
I
obj='Var
obj_type='N
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Exec
pag=3
prev=O412
I
obj='Var
obj_type='N
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=3
prev=O391
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O393
fatherSonIndex=0
frm_calc=[
'_tipofile='P'
]
h=[
19
19
]
obj='If
pag=3
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O499
fatherSonIndex=0
frm_calc='0
len=10
name='_rownum
next=Icpitembatch.CPExec
check='man
frm_calc='// Legge il csv e scrive la tabella﷯String [] nextLine;﷯while ((nextLine = reader.readNext()) != null) {
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGVLTEMI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prog
next=Icpitembatch.CPInsert
arch='cgo_vlt_emessi
next=Icpitembatch.CPVarDecl
frm_calc='_rownum + 1
len=10
name='_rownum
next=Icpitembatch.CPIfElse
frm_calc=[
'Empty(LRTrim(nextLine[2])) and (Val(nextLine[3]) / 100) >= 500
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
comment='Messaggio Trasferimento
frm_calc=''Sono state inserite '+LRTrim(Str(_rownum,10,0))+' emissioni ...'
global=True
len=120
name='gMsgImp
next=Icpitembatch.CPExec
check='man
frm_calc='}﷯// Chiuse il file﷯reader.close();
obj='Exec
pag=3
prev=O512
I
nonlocal=True
obj='Var
pag=3
prev=O509
var_op='asgn
I
obj='If
pag=3
prev=O508
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O509
fatherSonIndex=0
frm_calc='''
len=6
name='_coddip
next=Icpitembatch.CPIfElse
frm_calc=[
'mcANADIP.GoToKey(LRTrim(nextLine[1]))
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGTELEMATICO\'"+LRTrim(_gAzienda)+"'","",15)
len=15
name='_prgtele
next=Icpitembatch.CPInsert
arch='cgo_telematico
next=Icpitembatch.CPBeginEnd
comment='Inserisce nel Memory Cursor
h=[
19
19
]
obj='Begin
pag=3
prev=O521
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O522
fatherSonIndex=0
frm_calc='LRTrim(nextLine[0])
len=50
name='_idticket
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
len=50
name='_idsala
next=Icpitembatch.CPSelect
h=[
19
19
]
obj='Select
pag=3
prev=O527
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O528
fatherSonIndex=0
frm_calc='LRTrim(nextLine[0])
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''COGETECH'
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='nextLine[2]
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],2)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='0
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='0
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='0
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''E'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=3
prev=O547
var_op='meth
I
obj='Var
obj_type='MC
pag=3
prev=O546
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O545
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O544
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O543
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O542
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O541
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O540
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O539
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O538
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O537
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O536
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O535
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O534
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O533
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O532
var_op='prop
I
obj='Var
obj_type='MC
pag=3
var_op='meth
I
I
]
w=[
150
150
]
I
obj='Var
pag=3
prev=O526
var_op='asgn
I
obj='Var
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Insert
pag=3
prev=O520
rd_kfield=[
'SNAINUMOPE
'ENV
'CODDIPE
'TOTLIRE
'CACODICE
'CADATAORA
'CAIDBIGLIETTO
'TIPOGIOCO
'CODLOB
'VPCODICE
]
rd_kvar=[
''V'+Right(LRTrim(_prgtele),14)
''V'
'_coddip
'Val(nextLine[3]) / 100
''1'
'ConvDT(nextLine[4],2)
'nextLine[0]
''V'
''VLT'
'_platcod
]
I
obj='Var
pag=3
prev=O517
var_op='asgn
I
obj='If
pag=3
prev=O516
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O517
fatherSonIndex=0
frm_calc='mcANADIP.CODDIP
len=6
name='_coddip
obj='Var
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='N
pag=3
prev=O507
var_op='asgn
I
obj='Insert
pag=3
prev=O506
rd_kfield=[
'VLTEME_IDPROG
'VLTEME_PIATTAFORMA
'VLTEME_IDTICKETOUT
'VLTEME_SALA
'VLTEME_VLT
'VLTEME_IMPORTO
'VLTEME_DATEMI
'VLTEME_DATSCA
'VLTEME_IDSESSIONE
'VLTEME_DATACREA
]
rd_kvar=[
'_prog
'_codiceplat
'nextLine[0]
'nextLine[1]
'nextLine[2]
'Val(nextLine[3]) / 100
'ConvDT(nextLine[4],2)
'ConvDT(nextLine[5],2)
'nextLine[6]
'ConvDT(nextLine[7],2)
]
I
obj='Var
obj_type='N
pag=3
prev=O505
var_op='asgn
I
obj='Exec
pag=3
prev=O504
I
obj='Var
obj_type='N
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=3
prev=O389
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O391
fatherSonIndex=0
frm_calc=[
'_tipofile='N'
]
h=[
19
19
]
obj='If
pag=3
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O564
fatherSonIndex=0
frm_calc='0
len=10
name='_rownum
next=Icpitembatch.CPExec
check='man
frm_calc='// Legge il csv e scrive la tabella﷯String [] nextLine;﷯while ((nextLine = reader.readNext()) != null) {
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGVLTEMI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prog
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
len=50
name='_idticket
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
len=50
name='_idsala
next=Icpitembatch.CPInsert
arch='cgo_vlt_emessi
next=Icpitembatch.CPVarDecl
frm_calc='_rownum + 1
len=10
name='_rownum
next=Icpitembatch.CPIfElse
frm_calc=[
'Empty(LRTrim(nextLine[2])) and (Val(nextLine[3]) / 100) >= 500
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
comment='Messaggio Trasferimento
frm_calc=''Sono state inserite '+LRTrim(Str(_rownum,10,0))+' emissioni ...'
global=True
len=120
name='gMsgImp
next=Icpitembatch.CPExec
check='man
frm_calc='}﷯// Chiuse il file﷯reader.close();
obj='Exec
pag=3
prev=O579
I
nonlocal=True
obj='Var
pag=3
prev=O576
var_op='asgn
I
obj='If
pag=3
prev=O575
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O576
fatherSonIndex=0
frm_calc='''
len=6
name='_coddip
next=Icpitembatch.CPIfElse
frm_calc=[
'mcANADIP.GoToKey(LRTrim(nextLine[1]))
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGTELEMATICO\'"+LRTrim(_gAzienda)+"'","",15)
len=15
name='_prgtele
next=Icpitembatch.CPInsert
arch='cgo_telematico
next=Icpitembatch.CPBeginEnd
comment='Inserisce nel Memory Cursor
h=[
19
19
]
obj='Begin
pag=3
prev=O588
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O589
fatherSonIndex=0
h=[
19
19
]
obj='Select
pag=3
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O593
fatherSonIndex=0
frm_calc='LRTrim(nextLine[0])
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='iif(At('snai',_nomefile) <> 0,'SNAI','COGETECH')
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='nextLine[2]
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],1)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='0
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='0
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='0
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''E'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=3
prev=O612
var_op='meth
I
obj='Var
obj_type='MC
pag=3
prev=O611
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O610
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O609
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O608
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O607
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O606
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O605
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O604
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O603
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O602
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O601
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O600
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O599
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O598
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O597
var_op='prop
I
obj='Var
obj_type='MC
pag=3
var_op='meth
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Insert
pag=3
prev=O587
rd_kfield=[
'SNAINUMOPE
'ENV
'CODDIPE
'TOTLIRE
'CACODICE
'CADATAORA
'CAIDBIGLIETTO
'TIPOGIOCO
'CODLOB
'VPCODICE
]
rd_kvar=[
''V'+Right(LRTrim(_prgtele),14)
''V'
'_coddip
'Val(nextLine[3]) / 100
''1'
'ConvDT(nextLine[4],1)
'nextLine[0]
''V'
''VLT'
'_platcod
]
I
obj='Var
pag=3
prev=O584
var_op='asgn
I
obj='If
pag=3
prev=O583
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O584
fatherSonIndex=0
frm_calc='mcANADIP.CODDIP
len=6
name='_coddip
obj='Var
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='N
pag=3
prev=O574
var_op='asgn
I
obj='Insert
pag=3
prev=O573
rd_kfield=[
'VLTEME_IDPROG
'VLTEME_PIATTAFORMA
'VLTEME_IDTICKETOUT
'VLTEME_SALA
'VLTEME_VLT
'VLTEME_IMPORTO
'VLTEME_DATEMI
'VLTEME_DATSCA
'VLTEME_IDSESSIONE
'VLTEME_DATACREA
'VLTEME_IDXAFF
]
rd_kvar=[
'_prog
'_codiceplat
'nextLine[0]
'nextLine[1]
'nextLine[2]
'Val(nextLine[3]) / 100
'ConvDT(nextLine[4],1)
'ConvDT(nextLine[5],1)
'nextLine[6]
'ConvDT(nextLine[7],1)
'nextLine[8]
]
I
obj='Var
pag=3
prev=O572
var_op='asgn
I
obj='Var
pag=3
prev=O571
var_op='asgn
I
obj='Var
obj_type='N
pag=3
prev=O570
var_op='asgn
I
obj='Exec
pag=3
prev=O569
I
obj='Var
obj_type='N
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=3
prev=O387
sons=[
Icpitembatch.CPItemSon
collapsed=True
instr=Icpitembatch.CPIfElse
father=O389
fatherSonIndex=0
frm_calc=[
'_tipofile='S'
]
h=[
19
19
]
obj='If
pag=3
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O629
fatherSonIndex=0
frm_calc='0
len=10
name='_rownum
next=Icpitembatch.CPExec
check='man
frm_calc='// Legge il csv e scrive la tabella﷯String [] nextLine;﷯while ((nextLine = reader.readNext()) != null) {
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGVLTEMI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prog
next=Icpitembatch.CPInsert
arch='cgo_vlt_emessi
next=Icpitembatch.CPVarDecl
frm_calc='_rownum + 1
len=10
name='_rownum
next=Icpitembatch.CPIfElse
frm_calc=[
'Empty(LRTrim(nextLine[2])) and (Val(nextLine[3]) / 100) >= 500
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
comment='Messaggio Trasferimento
frm_calc=''Sono state inserite '+LRTrim(Str(_rownum,10,0))+' emissioni ...'
global=True
len=120
name='gMsgImp
next=Icpitembatch.CPExec
check='man
frm_calc='}﷯// Chiuse il file﷯reader.close();
obj='Exec
pag=3
prev=O642
I
nonlocal=True
obj='Var
pag=3
prev=O639
var_op='asgn
I
obj='If
pag=3
prev=O638
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O639
fatherSonIndex=0
frm_calc='''
len=6
name='_coddip
next=Icpitembatch.CPIfElse
frm_calc=[
'mcANADIP.GoToKey(LRTrim(nextLine[1]))
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGTELEMATICO\'"+LRTrim(_gAzienda)+"'","",15)
len=15
name='_prgtele
next=Icpitembatch.CPInsert
arch='cgo_telematico
next=Icpitembatch.CPBeginEnd
comment='Inserisce nel Memory Cursor
h=[
19
19
]
obj='Begin
pag=3
prev=O651
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O652
fatherSonIndex=0
frm_calc='LRTrim(nextLine[0])
len=50
name='_idticket
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
len=50
name='_idsala
next=Icpitembatch.CPSelect
h=[
19
19
]
obj='Select
pag=3
prev=O657
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O658
fatherSonIndex=0
frm_calc='LRTrim(nextLine[0])
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='iif(At('snai',_nomefile) <> 0,'SNAI','COGETECH')
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='nextLine[2]
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],1)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='0
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='0
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='0
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''E'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=3
prev=O677
var_op='meth
I
obj='Var
obj_type='MC
pag=3
prev=O676
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O675
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O674
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O673
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O672
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O671
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O670
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O669
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O668
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O667
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O666
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O665
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O664
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O663
var_op='prop
I
obj='Var
obj_type='MC
pag=3
prev=O662
var_op='prop
I
obj='Var
obj_type='MC
pag=3
var_op='meth
I
I
]
w=[
150
150
]
I
obj='Var
pag=3
prev=O656
var_op='asgn
I
obj='Var
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Insert
pag=3
prev=O650
rd_kfield=[
'SNAINUMOPE
'ENV
'CODDIPE
'TOTLIRE
'CACODICE
'CADATAORA
'CAIDBIGLIETTO
'TIPOGIOCO
'CODLOB
'VPCODICE
]
rd_kvar=[
''V'+Right(LRTrim(_prgtele),14)
''V'
'_coddip
'Val(nextLine[3]) / 100
''1'
'ConvDT(nextLine[4],1)
'nextLine[0]
''V'
''VLT'
'_platcod
]
I
obj='Var
pag=3
prev=O647
var_op='asgn
I
obj='If
pag=3
prev=O646
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O647
fatherSonIndex=0
frm_calc='mcANADIP.CODDIP
len=6
name='_coddip
obj='Var
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='N
pag=3
prev=O637
var_op='asgn
I
obj='Insert
pag=3
prev=O636
rd_kfield=[
'VLTEME_IDPROG
'VLTEME_PIATTAFORMA
'VLTEME_IDTICKETOUT
'VLTEME_SALA
'VLTEME_VLT
'VLTEME_IMPORTO
'VLTEME_DATEMI
'VLTEME_DATSCA
'VLTEME_IDSESSIONE
'VLTEME_DATACREA
]
rd_kvar=[
'_prog
'_codiceplat
'nextLine[0]
'nextLine[1]
'nextLine[2]
'Val(nextLine[3]) / 100
'ConvDT(nextLine[4],1)
'ConvDT(nextLine[5],1)
'nextLine[6]
'ConvDT(nextLine[7],1)
]
I
obj='Var
obj_type='N
pag=3
prev=O635
var_op='asgn
I
obj='Exec
pag=3
prev=O634
I
obj='Var
obj_type='N
pag=3
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=3
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPExec
check='man
father=O387
fatherSonIndex=0
frm_calc='// Crea il lettore con i parametri di separatore e testata﷯FileReader freader=new FileReader(_nomefile);﷯CSVParser parser = new CSVParserBuilder().withSeparator(_separator.charAt(0)).build();﷯CSVReader reader = new CSVReaderBuilder(freader).withSkipLines((int)_intesta).withCSVParser(parser).build();
obj='Exec
pag=3
I
I
]
w=[
150
150
]
x=17
y=14
I
Icpitembatch.CPBeginEnd
comment='Crea il lettore del file CSV
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Tipo Spielo
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Tipo Novomatic
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Tipo Playtech
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Tipo Inspired
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='_gMsgProc + 'Sono state importate '+LRTrim(Str(_rownum,10,0)) +' sessioni per la piattaforma '  + LRTrim(_codiceplat)
len=10
name='_gMsgProc
next=Icpitembatch.CPIfElse
frm_calc=[
'pTipo='D'
]
h=[
19
19
]
obj='If
pag=2
prev=O706
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O707
fatherSonIndex=0
frm_calc='gMsgProc + _gMsgProc
global=True
len=10
name='gMsgProc
nonlocal=True
obj='Var
obj_type='M
pag=2
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='M
pag=2
prev=O704
var_op='asgn
I
obj='Begin
pag=2
prev=O702
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O704
fatherSonIndex=0
frm_calc=[
'_tipofile='I'
]
h=[
19
19
]
obj='If
pag=2
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O716
fatherSonIndex=0
frm_calc='0
len=10
name='_rownum
next=Icpitembatch.CPExec
check='man
frm_calc='// Legge il csv e scrive la tabella﷯String [] nextLine;﷯while ((nextLine = reader.readNext()) != null) {
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGVLTSES\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prog
next=Icpitembatch.CPInsert
arch='cgo_vlt_sessioni
next=Icpitembatch.CPVarDecl
frm_calc='_rownum + 1
len=10
name='_rownum
next=Icpitembatch.CPVarDecl
comment='Messaggio Trasferimento
frm_calc=''Sono state inserite '+LRTrim(Str(_rownum,10,0))+' sessioni ...'
global=True
len=120
name='gMsgImp
next=Icpitembatch.CPExec
check='man
frm_calc='}﷯// Chiuse il file﷯reader.close();
obj='Exec
pag=2
prev=O726
I
nonlocal=True
obj='Var
pag=2
prev=O725
var_op='asgn
I
obj='Var
obj_type='N
pag=2
prev=O724
var_op='asgn
I
obj='Insert
pag=2
prev=O723
rd_kfield=[
'VLTSES_IDPROG
'VLTSES_PIATTAFORMA
'VLTSES_IDSESSIONE
'VLTSES_SALA
'VLTSES_VLT
'VLTSES_DATINI
'VLTSES_DATFIN
'VLTSES_BETNUM
'VLTSES_BETIMP
'VLTSES_GROSWIN
'VLTSES_NETWIN
'VLTSES_TOTALIN
'VLTSES_TICKETIN
'VLTSES_BILLIN
'VLTSES_OUT
'VLTSES_DATACREA
'VLTSES_TICKET_BC
'VLTSES_DATAEMI
]
rd_kvar=[
'_prog
'nextLine[0]
'nextLine[1]
'nextLine[4]
'nextLine[6]
'ConvDT(nextLine[2],2)
'ConvDT(nextLine[3],2)
'Val(nextLine[11])
'Val(nextLine[12]) / 100
'Val(nextLine[13]) / 100
'Val(nextLine[14]) / 100
'Val(nextLine[8]) / 100
'Val(nextLine[10]) / 100
'Val(nextLine[9]) / 100
'Val(nextLine[15]) / 100
'CharToDate(Substr(nextLine[19],7,4)+Substr(nextLine[19],4,2)+Left(nextLine[19],2))
'Strtran(nextLine[7]," ",'')
'ConvDT(nextLine[16],2)
]
I
obj='Var
obj_type='N
pag=2
prev=O722
var_op='asgn
I
obj='Exec
pag=2
prev=O721
I
obj='Var
obj_type='N
pag=2
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=2
prev=O700
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O702
fatherSonIndex=0
frm_calc=[
'_tipofile='P'
]
h=[
19
19
]
obj='If
pag=2
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O734
fatherSonIndex=0
frm_calc='0
len=10
name='_rownum
next=Icpitembatch.CPExec
check='man
frm_calc='// Legge il csv e scrive la tabella﷯String [] nextLine;﷯while ((nextLine = reader.readNext()) != null) {
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGVLTSES\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prog
next=Icpitembatch.CPInsert
arch='cgo_vlt_sessioni
next=Icpitembatch.CPVarDecl
frm_calc='_rownum + 1
len=10
name='_rownum
next=Icpitembatch.CPVarDecl
comment='Messaggio Trasferimento
frm_calc=''Sono state inserite '+LRTrim(Str(_rownum,10,0))+' sessioni ...'
global=True
len=120
name='gMsgImp
next=Icpitembatch.CPExec
check='man
frm_calc='}﷯// Chiuse il file﷯reader.close();
obj='Exec
pag=2
prev=O744
I
nonlocal=True
obj='Var
pag=2
prev=O743
var_op='asgn
I
obj='Var
obj_type='N
pag=2
prev=O742
var_op='asgn
I
obj='Insert
pag=2
prev=O741
rd_kfield=[
'VLTSES_IDPROG
'VLTSES_PIATTAFORMA
'VLTSES_IDSESSIONE
'VLTSES_SALA
'VLTSES_VLT
'VLTSES_DATINI
'VLTSES_DATFIN
'VLTSES_BETNUM
'VLTSES_BETIMP
'VLTSES_GROSWIN
'VLTSES_NETWIN
'VLTSES_TOTALIN
'VLTSES_TICKETIN
'VLTSES_BILLIN
'VLTSES_OUT
'VLTSES_IDTICKETOUT
'VLTSES_TICKETLIST
'VLTSES_DATACREA
]
rd_kvar=[
'_prog
'_codiceplat
'nextLine[0]
'nextLine[1]
'nextLine[2]
'ConvDT(nextLine[3],2)
'ConvDT(nextLine[4],2)
'Val(nextLine[5])
'Val(nextLine[6]) / 100
'Val(nextLine[7]) / 100
'Val(nextLine[8]) / 100
'Val(nextLine[9]) / 100
'Val(nextLine[10]) / 100
'Val(nextLine[11]) / 100
'Val(nextLine[12]) / 100
'nextLine[13]
'nextLine[14]
'CharToDate(Left(nextLine[15],4)+Substr(nextLine[15],6,2)+Substr(nextLine[15],9,2))
]
I
obj='Var
obj_type='N
pag=2
prev=O740
var_op='asgn
I
obj='Exec
pag=2
prev=O739
I
obj='Var
obj_type='N
pag=2
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=2
prev=O698
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O700
fatherSonIndex=0
frm_calc=[
'_tipofile='N'
]
h=[
19
19
]
obj='If
pag=2
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O752
fatherSonIndex=0
frm_calc='0
len=10
name='_rownum
next=Icpitembatch.CPExec
check='man
frm_calc='// Legge il csv e scrive la tabella﷯String [] nextLine;﷯while ((nextLine = reader.readNext()) != null) {
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGVLTSES\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prog
next=Icpitembatch.CPInsert
arch='cgo_vlt_sessioni
next=Icpitembatch.CPVarDecl
frm_calc='_rownum + 1
len=10
name='_rownum
next=Icpitembatch.CPVarDecl
comment='Messaggio Trasferimento
frm_calc=''Sono state inserite '+LRTrim(Str(_rownum,10,0))+' sessioni ...'
global=True
len=120
name='gMsgImp
next=Icpitembatch.CPExec
check='man
frm_calc='}﷯// Chiuse il file﷯reader.close();
obj='Exec
pag=2
prev=O762
I
nonlocal=True
obj='Var
pag=2
prev=O761
var_op='asgn
I
obj='Var
obj_type='N
pag=2
prev=O760
var_op='asgn
I
obj='Insert
pag=2
prev=O759
rd_kfield=[
'VLTSES_IDPROG
'VLTSES_PIATTAFORMA
'VLTSES_IDSESSIONE
'VLTSES_SALA
'VLTSES_VLT
'VLTSES_DATINI
'VLTSES_DATFIN
'VLTSES_BETNUM
'VLTSES_BETIMP
'VLTSES_GROSWIN
'VLTSES_NETWIN
'VLTSES_TOTALIN
'VLTSES_TICKETIN
'VLTSES_BILLIN
'VLTSES_OUT
'VLTSES_IDTICKETOUT
'VLTSES_TICKETLIST
'VLTSES_DATACREA
]
rd_kvar=[
'_prog
'_codiceplat
'nextLine[0]
'nextLine[1]
'nextLine[2]
'ConvDT(nextLine[3],1)
'ConvDT(nextLine[4],1)
'Val(nextLine[5])
'Val(nextLine[6]) / 100
'Val(nextLine[7]) / 100
'Val(nextLine[8]) / 100
'Val(nextLine[9]) / 100
'Val(nextLine[10]) / 100
'Val(nextLine[11]) / 100
'Val(nextLine[12]) / 100
'nextLine[13]
'nextLine[14]
'CharToDate(Left(nextLine[15],4)+Substr(nextLine[15],6,2)+Substr(nextLine[15],9,2))
]
I
obj='Var
obj_type='N
pag=2
prev=O758
var_op='asgn
I
obj='Exec
pag=2
prev=O757
I
obj='Var
obj_type='N
pag=2
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=2
prev=O696
sons=[
Icpitembatch.CPItemSon
collapsed=True
instr=Icpitembatch.CPIfElse
father=O698
fatherSonIndex=0
frm_calc=[
'_tipofile='S'
]
h=[
19
19
]
obj='If
pag=2
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O770
fatherSonIndex=0
frm_calc='0
len=10
name='_rownum
next=Icpitembatch.CPExec
check='man
frm_calc='// Legge il csv e scrive la tabella﷯String [] nextLine;﷯while ((nextLine = reader.readNext()) != null) {
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGVLTSES\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prog
next=Icpitembatch.CPInsert
arch='cgo_vlt_sessioni
next=Icpitembatch.CPVarDecl
frm_calc='_rownum + 1
len=10
name='_rownum
next=Icpitembatch.CPVarDecl
comment='Messaggio Trasferimento
frm_calc=''Sono state inserite '+LRTrim(Str(_rownum,10,0))+' sessioni ...'
global=True
len=120
name='gMsgImp
next=Icpitembatch.CPExec
check='man
frm_calc='}﷯// Chiuse il file﷯reader.close();
obj='Exec
pag=2
prev=O780
I
nonlocal=True
obj='Var
pag=2
prev=O779
var_op='asgn
I
obj='Var
obj_type='N
pag=2
prev=O778
var_op='asgn
I
obj='Insert
pag=2
prev=O777
rd_kfield=[
'VLTSES_IDPROG
'VLTSES_PIATTAFORMA
'VLTSES_IDSESSIONE
'VLTSES_SALA
'VLTSES_VLT
'VLTSES_DATINI
'VLTSES_DATFIN
'VLTSES_BETNUM
'VLTSES_BETIMP
'VLTSES_GROSWIN
'VLTSES_NETWIN
'VLTSES_TOTALIN
'VLTSES_TICKETIN
'VLTSES_BILLIN
'VLTSES_OUT
'VLTSES_IDTICKETOUT
'VLTSES_TICKETLIST
'VLTSES_DATACREA
]
rd_kvar=[
'_prog
'nextLine[0]
'nextLine[1]
'nextLine[2]
'nextLine[3]
'ConvDT(nextLine[4],1)
'ConvDT(nextLine[5],1)
'Val(nextLine[6])
'Val(nextLine[7]) / 100
'Val(nextLine[8]) / 100
'Val(nextLine[9]) / 100
'Val(nextLine[10]) / 100
'Val(nextLine[11]) / 100
'Val(nextLine[12]) / 100
'Val(nextLine[13]) / 100
'nextLine[14]
'nextLine[15]
'CharToDate(Left(nextLine[16],4)+Substr(nextLine[16],6,2)+Substr(nextLine[16],9,2))
]
I
obj='Var
obj_type='N
pag=2
prev=O776
var_op='asgn
I
obj='Exec
pag=2
prev=O775
I
obj='Var
obj_type='N
pag=2
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=2
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPExec
check='man
father=O696
fatherSonIndex=0
frm_calc='// Crea il lettore con i parametri di separatore e testata﷯FileReader freader=new FileReader(_nomefile);﷯CSVParser parser = new CSVParserBuilder().withSeparator(_separator.charAt(0)).build();﷯CSVReader reader = new CSVReaderBuilder(freader).withSkipLines((int)_intesta).withCSVParser(parser).build();
obj='Exec
pag=2
I
I
]
w=[
150
150
]
x=20
y=19
I
Icpitembatch.CPBeginEnd
comment='Crea il lettore del file CSV
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Tipo Spielo
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Tipo Novomatic
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Tipo Playtech
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Tipo Inspired
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='_gMsgProc + 'Sono state importati '+LRTrim(Str(_rownum,10,0)) +' biglietti convalidati per la piattaforma '  + LRTrim(_codiceplat)
len=10
name='_gMsgProc
next=Icpitembatch.CPIfElse
frm_calc=[
'pTipo='D'
]
h=[
19
19
]
obj='If
pag=4
prev=O800
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O801
fatherSonIndex=0
frm_calc='gMsgProc + _gMsgProc
global=True
len=10
name='gMsgProc
nonlocal=True
obj='Var
obj_type='M
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='M
pag=4
prev=O798
var_op='asgn
I
obj='Begin
pag=4
prev=O796
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O798
fatherSonIndex=0
frm_calc=[
'_tipofile='I'
]
h=[
19
19
]
obj='If
pag=4
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O810
fatherSonIndex=0
frm_calc='0
len=10
name='_rownum
next=Icpitembatch.CPExec
check='man
frm_calc='// Legge il csv e scrive la tabella﷯String [] nextLine;﷯while ((nextLine = reader.readNext()) != null) {
next=Icpitembatch.CPIfElse
frm_calc=[
'Len(LRTrim(nextLine[0])) = 10 and LRTrim(nextLine[7])="REDEEMED"
]
h=[
19
19
]
next=Icpitembatch.CPExec
check='man
frm_calc='}﷯// Chiuse il file﷯reader.close();
obj='Exec
pag=4
prev=O817
I
obj='If
pag=4
prev=O816
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O817
fatherSonIndex=0
frm_calc='Utilities.GetAutonumber("PRGVLTCVD\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prog
next=Icpitembatch.CPVarDecl
frm_calc='Strtran(LRTrim(nextLine[8])," ",'')
len=50
name='_idticket
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[3])
len=50
name='_idsala
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[5])
len=50
name='_idvlt
next=Icpitembatch.CPVarDecl
frm_calc='NullDateTime()
len=14
name='_dataemi
next=Icpitembatch.CPVarDecl
dec=2
frm_calc='Val(nextLine[6]) / 100
len=12
name='_nomcon
next=Icpitembatch.CPVarDecl
dec=2
frm_calc='0
len=12
name='_nomemi
next=Icpitembatch.CPVarDecl
dec=2
frm_calc='0
len=12
name='_nomout
next=Icpitembatch.CPRead
arch='cgo_vlt_emessi
next=Icpitembatch.CPInsert
arch='cgo_vlt_convalidati
next=Icpitembatch.CPWrite
arch='cgo_vlt_sessioni
next=Icpitembatch.CPVarDecl
frm_calc='_rownum + 1
len=10
name='_rownum
next=Icpitembatch.CPIfElse
frm_calc=[
'(Empty(LRTrim(nextLine[5])) or Left(LRTrim(nextLine[5]),1)='P') and (Val(nextLine[6]) / 100) >= 500
'(Empty(LRTrim(nextLine[5])) or Left(LRTrim(nextLine[5]),1)='P') and ((Val(nextLine[6]) / 100) >= 400 and (Val(nextLine[6]) / 100) < 500)
'(Empty(LRTrim(nextLine[5])) or Left(LRTrim(nextLine[5]),1)='P') and ((Val(nextLine[6]) / 100) >= 100 and (Val(nextLine[6]) / 100) < 400)
]
h=[
19
19
19
19
]
obj='If
pag=4
prev=O834
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O835
fatherSonIndex=0
frm_calc='''
len=6
name='_coddip
next=Icpitembatch.CPIfElse
frm_calc=[
'mcANADIP.GoToKey(LRTrim(nextLine[3]))
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGTELEMATICO\'"+LRTrim(_gAzienda)+"'","",15)
len=15
name='_prgtele
next=Icpitembatch.CPInsert
arch='cgo_telematico
next=Icpitembatch.CPIfElse
frm_calc=[
'mcVLTREP.GoToKey(_idticket)
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O845
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O846
fatherSonIndex=0
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[20],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O852
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O851
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='prop
I
I
Icpitembatch.CPItemSon
collapsed=True
instr=Icpitembatch.CPSelect
father=O846
fatherSonIndex=1
h=[
19
19
]
obj='Select
pag=4
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O855
fatherSonIndex=0
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
len=12
name='_nomses
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomses <> 0
'_nomses=0 and _nomemi<>0
'_nomses=0 and _nomemi=0 and _nomcon <> 0
]
h=[
19
19
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomout <> 0
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O860
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O863
fatherSonIndex=0
frm_calc='LRTrim(_idticket)
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[3])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''COGETECH'
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_vltemi
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='Strtran(LRTrim(nextLine[8])," ",'')
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_nomout
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[20],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''C'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O881
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O880
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O879
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O878
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O877
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O876
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O875
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O874
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O873
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O872
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O871
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O870
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O869
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O868
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='meth
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O863
fatherSonIndex=1
frm_calc='Utilities.GetAutonumber("PRGVLTSCARTI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prgscarti
next=Icpitembatch.CPInsert
arch='cgo_vlt_scarti
obj='Insert
pag=4
prev=O884
rd_kfield=[
'VLTSCARTI_PROG
'VLTSCARTI_DATAIMPORT
'VLTSCARTI_IDSESSIONE
'VLTSCARTI_PIATTAFORMA
'VLTSCARTI_IDTICKET
'VLTSCARTI_IDTICKET_BC
'VLTSCARTI_MOTIVO
]
rd_kvar=[
'_prgscarti
'_dataimp
'cgo_vlt_sessioni->VLTSES_IDSESSIONE
'_codiceplat
'Strtran(LRTrim(nextLine[8])," ",'')
'Strtran(LRTrim(nextLine[9])," ",'')
'"Non è stato valorizzato l'importo out"
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='If
pag=4
prev=O859
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O860
fatherSonIndex=0
frm_calc='_nomses
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O860
fatherSonIndex=1
frm_calc='_nomemi
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O860
fatherSonIndex=2
frm_calc='_nomcon
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
150
]
I
obj='Insert
pag=4
prev=O844
rd_kfield=[
'SNAINUMOPE
'ENV
'CODDIPE
'TOTLIRE
'CACODICE
'CADATAORA
'CAIDBIGLIETTO
'TIPOGIOCO
'CODLOB
'VPCODICE
]
rd_kvar=[
''V'+Right(LRTrim(_prgtele),14)
''V'
'_coddip
'Val(nextLine[6]) / 100
''3'
'ConvD(nextLine[20],1)
'Strtran(LRTrim(nextLine[8])," ",'')
''V'
''VLT'
'_platcod
]
I
obj='Var
pag=4
prev=O841
var_op='asgn
I
obj='If
pag=4
prev=O840
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O841
fatherSonIndex=0
frm_calc='mcANADIP.CODDIP
len=6
name='_coddip
obj='Var
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O835
fatherSonIndex=1
h=[
19
19
]
obj='Select
pag=4
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O906
fatherSonIndex=0
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
len=12
name='_nomses
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomses <> 0
'_nomses=0 and _nomemi<>0
'_nomses=0 and _nomemi=0 and _nomcon <> 0
]
h=[
19
19
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomout <> 0
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O911
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=5
father=O914
fatherSonIndex=0
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / _nomout
len=10
name='_rapgino
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / cgo_vlt_sessioni->VLTSES_TOTALIN
len=10
name='_rapgiin
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_GROSWIN * 100) / _nomout
len=10
name='_rapvino
next=Icpitembatch.CPIfElse
frm_calc=[
'_rapgino < 20 or _rapgiin < 20 or _rapvino < 20
]
h=[
19
19
]
obj='If
pag=4
prev=O921
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O922
fatherSonIndex=0
frm_calc='''
len=6
name='_coddip
next=Icpitembatch.CPIfElse
frm_calc=[
'mcANADIP.GoToKey(LRTrim(nextLine[3]))
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGTELEMATICO\'"+LRTrim(_gAzienda)+"'","",15)
len=15
name='_prgtele
next=Icpitembatch.CPInsert
arch='cgo_telematico
next=Icpitembatch.CPIfElse
frm_calc=[
'mcVLTREP.GoToKey(_idticket)
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O932
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O933
fatherSonIndex=0
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[20],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O942
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O941
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O940
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O939
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O938
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='prop
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O933
fatherSonIndex=1
h=[
19
19
]
obj='Select
pag=4
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O945
fatherSonIndex=0
frm_calc='LRTrim(_idticket)
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[3])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''COGETECH'
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_vltemi
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='Strtran(LRTrim(nextLine[8])," ",'')
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_nomout
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[20],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''C'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O965
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O964
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O963
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O962
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O961
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O960
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O959
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O958
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O957
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O956
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O955
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O954
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O953
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O952
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O951
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O950
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O949
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='meth
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
150
]
I
obj='Insert
pag=4
prev=O931
rd_kfield=[
'SNAINUMOPE
'ENV
'CODDIPE
'TOTLIRE
'CACODICE
'CADATAORA
'CAIDBIGLIETTO
'TIPOGIOCO
'CODLOB
'VPCODICE
]
rd_kvar=[
''V'+Right(LRTrim(_prgtele),14)
''V'
'_coddip
'Val(nextLine[6]) / 100
''3'
'ConvD(nextLine[20],1)
'Strtran(LRTrim(nextLine[8])," ",'')
''V'
''VLT'
'_platcod
]
I
obj='Var
pag=4
prev=O928
var_op='asgn
I
obj='If
pag=4
prev=O927
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O928
fatherSonIndex=0
frm_calc='mcANADIP.CODDIP
len=6
name='_coddip
obj='Var
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='N
pag=4
prev=O920
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O919
var_op='asgn
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O914
fatherSonIndex=1
frm_calc='Utilities.GetAutonumber("PRGVLTSCARTI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prgscarti
next=Icpitembatch.CPInsert
arch='cgo_vlt_scarti
obj='Insert
pag=4
prev=O977
rd_kfield=[
'VLTSCARTI_PROG
'VLTSCARTI_DATAIMPORT
'VLTSCARTI_IDSESSIONE
'VLTSCARTI_PIATTAFORMA
'VLTSCARTI_IDTICKET
'VLTSCARTI_IDTICKET_BC
'VLTSCARTI_MOTIVO
]
rd_kvar=[
'_prgscarti
'_dataimp
'cgo_vlt_sessioni->VLTSES_IDSESSIONE
'_codiceplat
'Strtran(LRTrim(nextLine[8])," ",'')
'Strtran(LRTrim(nextLine[9])," ",'')
'"Non è stato valorizzato l'importo out"
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='If
pag=4
prev=O910
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O911
fatherSonIndex=0
frm_calc='_nomses
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O911
fatherSonIndex=1
frm_calc='_nomemi
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O911
fatherSonIndex=2
frm_calc='_nomcon
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O835
fatherSonIndex=2
h=[
19
19
]
obj='Select
pag=4
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O992
fatherSonIndex=0
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
len=12
name='_nomses
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomses <> 0
'_nomses=0 and _nomemi<>0
'_nomses=0 and _nomemi=0 and _nomcon <> 0
]
h=[
19
19
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomout <> 0
]
h=[
19
19
19
]
haselse=True
next=Icpitembatch.CPVarDecl
comment='Messaggio Trasferimento
frm_calc=''Sono state inserite '+LRTrim(Str(_rownum,10,0))+' convalide ...'
global=True
len=120
name='gMsgImp
nonlocal=True
obj='Var
pag=4
prev=O1000
var_op='asgn
I
obj='If
pag=4
prev=O997
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=5
father=O1000
fatherSonIndex=0
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / _nomout
len=10
name='_rapgino
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / cgo_vlt_sessioni->VLTSES_TOTALIN
len=10
name='_rapgiin
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_GROSWIN * 100) / _nomout
len=10
name='_rapvino
next=Icpitembatch.CPIfElse
frm_calc=[
'_rapgino < 20 or _rapgiin < 20 or _rapvino < 20
]
h=[
19
19
]
obj='If
pag=4
prev=O1008
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O1009
fatherSonIndex=0
frm_calc=[
'mcVLTREP.GoToKey(_idticket)
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1014
fatherSonIndex=0
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[20],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1023
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1022
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1021
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1020
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1019
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='prop
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O1014
fatherSonIndex=1
h=[
19
19
]
obj='Select
pag=4
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1026
fatherSonIndex=0
frm_calc='LRTrim(_idticket)
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[3])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''COGETECH'
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_vltemi
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='Strtran(LRTrim(nextLine[8])," ",'')
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_nomout
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[20],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''C'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1046
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1045
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1044
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1043
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1042
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1041
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1040
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1039
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1038
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1037
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1036
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1035
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1034
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1033
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1032
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1031
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1030
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='meth
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
150
]
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='N
pag=4
prev=O1007
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1006
var_op='asgn
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1000
fatherSonIndex=1
frm_calc='Utilities.GetAutonumber("PRGVLTSCARTI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prgscarti
next=Icpitembatch.CPInsert
arch='cgo_vlt_scarti
obj='Insert
pag=4
prev=O1052
rd_kfield=[
'VLTSCARTI_PROG
'VLTSCARTI_DATAIMPORT
'VLTSCARTI_IDSESSIONE
'VLTSCARTI_PIATTAFORMA
'VLTSCARTI_IDTICKET
'VLTSCARTI_IDTICKET_BC
'VLTSCARTI_MOTIVO
]
rd_kvar=[
'_prgscarti
'_dataimp
'cgo_vlt_sessioni->VLTSES_IDSESSIONE
'_codiceplat
'Strtran(LRTrim(nextLine[8])," ",'')
'Strtran(LRTrim(nextLine[9])," ",'')
'"Non è stato valorizzato l'importo out"
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='If
pag=4
prev=O996
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O997
fatherSonIndex=0
frm_calc='_nomses
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O997
fatherSonIndex=1
frm_calc='_nomemi
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O997
fatherSonIndex=2
frm_calc='_nomcon
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
prev=O833
var_op='asgn
I
obj='Write
pag=4
prev=O832
rd_kfield=[
'VLTSES_TICKET_BC
'VLTSES_IDSESSIONE
]
rd_kop=[
'=
'=
]
rd_kvar=[
'Strtran(LRTrim(nextLine[9])," ",'')
'LRTrim(nextLine[10])
]
wr_field=[
'VLTSES_IDTICKETOUT
]
wr_op=[
'=
]
wr_var=[
'Strtran(LRTrim(nextLine[8])," ",'')
]
I
obj='Insert
pag=4
prev=O831
rd_kfield=[
'VLTCON_IDPROG
'VLTCON_PIATTAFORMA
'VLTCON_IDTICKETOUT
'VLTCON_SALA
'VLTCON_VLT
'VLTCON_IMPORTO
'VLTCON_DATCONV
'VLTCON_TICKET_BC
'VLTCON_IDSESEMIS
]
rd_kvar=[
'_prog
'_codiceplat
'Strtran(LRTrim(nextLine[8])," ",'')
'nextLine[3]
'nextLine[5]
'Val(nextLine[6]) / 100
'ConvDT(nextLine[20],1)
'Strtran(LRTrim(nextLine[9])," ",'')
'nextLine[10]
]
I
obj='Read
pag=4
prev=O830
rd_field=[
'VLTEME_DATEMI
'VLTEME_VLT
'VLTEME_IMPORTO
]
rd_kfield=[
'VLTEME_PIATTAFORMA
'VLTEME_TICKET_BC
'VLTEME_SALA
]
rd_kvar=[
'_codiceplat
'_idticket
'_idsala
]
rd_var=[
'_dataemi
'_vltemi
'_nomemi
]
I
obj='Var
obj_type='N
pag=4
prev=O829
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O828
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O827
var_op='asgn
I
obj='Var
obj_type='T
pag=4
prev=O826
var_op='asgn
I
obj='Var
pag=4
prev=O825
var_op='asgn
I
obj='Var
pag=4
prev=O824
var_op='asgn
I
obj='Var
pag=4
prev=O823
var_op='asgn
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Exec
pag=4
prev=O815
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=4
prev=O794
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O796
fatherSonIndex=0
frm_calc=[
'_tipofile='P'
]
h=[
19
19
]
obj='If
pag=4
sons=[
Icpitembatch.CPItemSon
collapsed=True
instr=Icpitembatch.CPVarDecl
father=O1084
fatherSonIndex=0
frm_calc='0
len=10
name='_rownum
next=Icpitembatch.CPExec
check='man
frm_calc='// Legge il csv e scrive la tabella﷯String [] nextLine;﷯while ((nextLine = reader.readNext()) != null) {
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGVLTCVD\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prog
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
len=50
name='_idticket
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
len=50
name='_idsala
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[2])
len=50
name='_idvlt
next=Icpitembatch.CPVarDecl
frm_calc='NullDateTime()
len=14
name='_dataemi
next=Icpitembatch.CPVarDecl
frm_calc='''
len=50
name='_vltemi
next=Icpitembatch.CPVarDecl
dec=2
frm_calc='Val(nextLine[3]) / 100
len=12
name='_nomcon
next=Icpitembatch.CPVarDecl
dec=2
frm_calc='0
len=12
name='_nomemi
next=Icpitembatch.CPVarDecl
dec=2
frm_calc='0
len=12
name='_nomout
next=Icpitembatch.CPRead
arch='cgo_vlt_emessi
next=Icpitembatch.CPInsert
arch='cgo_vlt_convalidati
next=Icpitembatch.CPVarDecl
frm_calc='_rownum + 1
len=10
name='_rownum
next=Icpitembatch.CPIfElse
frm_calc=[
'Empty(LRTrim(nextLine[2])) and (Val(nextLine[3]) / 100) >= 500
'Empty(LRTrim(nextLine[2])) and ((Val(nextLine[3]) / 100) >= 400 and (Val(nextLine[3]) / 100) < 500)
'Empty(LRTrim(nextLine[2])) and ((Val(nextLine[3]) / 100) >= 100 and (Val(nextLine[3]) / 100) < 400)
]
h=[
19
19
19
19
]
next=Icpitembatch.CPVarDecl
comment='Messaggio Trasferimento
frm_calc=''Sono state inserite '+LRTrim(Str(_rownum,10,0))+' convalide ...'
global=True
len=120
name='gMsgImp
next=Icpitembatch.CPExec
check='man
frm_calc='}﷯// Chiuse il file﷯reader.close();
obj='Exec
pag=4
prev=O1106
I
nonlocal=True
obj='Var
pag=4
prev=O1103
var_op='asgn
I
obj='If
pag=4
prev=O1102
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1103
fatherSonIndex=0
frm_calc='''
len=6
name='_coddip
next=Icpitembatch.CPIfElse
frm_calc=[
'mcANADIP.GoToKey(LRTrim(nextLine[1]))
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGTELEMATICO\'"+LRTrim(_gAzienda)+"'","",15)
len=15
name='_prgtele
next=Icpitembatch.CPInsert
arch='cgo_telematico
next=Icpitembatch.CPIfElse
frm_calc=[
'mcVLTREP.GoToKey(nextLine[0])
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1115
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1116
fatherSonIndex=0
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],2)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1122
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1121
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='prop
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O1116
fatherSonIndex=1
h=[
19
19
]
obj='Select
pag=4
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1125
fatherSonIndex=0
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
len=12
name='_nomses
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomses <> 0
'_nomses=0 and _nomemi<>0
'_nomses=0 and _nomemi=0 and _nomcon <> 0
]
h=[
19
19
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomout <> 0
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1130
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1133
fatherSonIndex=0
frm_calc='LRTrim(nextLine[0])
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''COGETECH'
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_vltemi
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_nomout
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],2)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''C'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1151
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1150
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1149
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1148
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1147
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1146
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1145
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1144
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1143
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1142
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1141
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1140
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1139
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1138
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='meth
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1133
fatherSonIndex=1
frm_calc='Utilities.GetAutonumber("PRGVLTSCARTI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prgscarti
next=Icpitembatch.CPInsert
arch='cgo_vlt_scarti
obj='Insert
pag=4
prev=O1154
rd_kfield=[
'VLTSCARTI_PROG
'VLTSCARTI_DATAIMPORT
'VLTSCARTI_IDSESSIONE
'VLTSCARTI_PIATTAFORMA
'VLTSCARTI_IDTICKET
'VLTSCARTI_IDTICKET_BC
'VLTSCARTI_MOTIVO
]
rd_kvar=[
'_prgscarti
'_dataimp
'cgo_vlt_sessioni->VLTSES_IDSESSIONE
'_codiceplat
'LRTrim(nextLine[0])
'''
'"Non è stato valorizzato l'importo out"
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='If
pag=4
prev=O1129
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1130
fatherSonIndex=0
frm_calc='_nomses
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1130
fatherSonIndex=1
frm_calc='_nomemi
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1130
fatherSonIndex=2
frm_calc='_nomcon
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
150
]
I
obj='Insert
pag=4
prev=O1114
rd_kfield=[
'SNAINUMOPE
'ENV
'CODDIPE
'TOTLIRE
'CACODICE
'CADATAORA
'CAIDBIGLIETTO
'TIPOGIOCO
'CODLOB
'VPCODICE
]
rd_kvar=[
''V'+Right(LRTrim(_prgtele),14)
''V'
'_coddip
'Val(nextLine[3]) / 100
''3'
'ConvDT(nextLine[4],2)
'nextLine[0]
''V'
''VLT'
'_platcod
]
I
obj='Var
pag=4
prev=O1111
var_op='asgn
I
obj='If
pag=4
prev=O1110
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1111
fatherSonIndex=0
frm_calc='mcANADIP.CODDIP
len=6
name='_coddip
obj='Var
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O1103
fatherSonIndex=1
h=[
19
19
]
obj='Select
pag=4
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1176
fatherSonIndex=0
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
len=12
name='_nomses
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomses <> 0
'_nomses=0 and _nomemi<>0
'_nomses=0 and _nomemi=0 and _nomcon <> 0
]
h=[
19
19
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomout <> 0
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1181
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1184
fatherSonIndex=0
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
len=12
name='_nomses
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / _nomout
len=10
name='_rapgino
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / cgo_vlt_sessioni->VLTSES_TOTALIN
len=10
name='_rapgiin
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_GROSWIN * 100) / _nomout
len=10
name='_rapvino
next=Icpitembatch.CPIfElse
frm_calc=[
'_rapgino < 20 or _rapgiin < 20 or _rapvino < 20
]
h=[
19
19
]
obj='If
pag=4
prev=O1192
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1193
fatherSonIndex=0
frm_calc='''
len=6
name='_coddip
next=Icpitembatch.CPIfElse
frm_calc=[
'mcANADIP.GoToKey(LRTrim(nextLine[1]))
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGTELEMATICO\'"+LRTrim(_gAzienda)+"'","",15)
len=15
name='_prgtele
next=Icpitembatch.CPInsert
arch='cgo_telematico
next=Icpitembatch.CPIfElse
frm_calc=[
'mcVLTREP.GoToKey(nextLine[0])
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1203
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1204
fatherSonIndex=0
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],2)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1213
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1212
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1211
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1210
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1209
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='prop
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1204
fatherSonIndex=1
frm_calc='LRTrim(nextLine[0])
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''COGETECH'
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_vltemi
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_nomout
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],2)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''C'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1232
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1231
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1230
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1229
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1228
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1227
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1226
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1225
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1224
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1223
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1222
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1221
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1220
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1219
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1218
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1217
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1216
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='meth
I
I
]
w=[
150
150
150
]
I
obj='Insert
pag=4
prev=O1202
rd_kfield=[
'SNAINUMOPE
'ENV
'CODDIPE
'TOTLIRE
'CACODICE
'CADATAORA
'CAIDBIGLIETTO
'TIPOGIOCO
'CODLOB
'VPCODICE
]
rd_kvar=[
''V'+Right(LRTrim(_prgtele),14)
''V'
'_coddip
'Val(nextLine[3]) / 100
''3'
'ConvDT(nextLine[4],2)
'nextLine[0]
''V'
''VLT'
'_platcod
]
I
obj='Var
pag=4
prev=O1199
var_op='asgn
I
obj='If
pag=4
prev=O1198
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1199
fatherSonIndex=0
frm_calc='mcANADIP.CODDIP
len=6
name='_coddip
obj='Var
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='N
pag=4
prev=O1191
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1190
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1189
var_op='asgn
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1184
fatherSonIndex=1
frm_calc='Utilities.GetAutonumber("PRGVLTSCARTI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prgscarti
next=Icpitembatch.CPInsert
arch='cgo_vlt_scarti
obj='Insert
pag=4
prev=O1243
rd_kfield=[
'VLTSCARTI_PROG
'VLTSCARTI_DATAIMPORT
'VLTSCARTI_IDSESSIONE
'VLTSCARTI_PIATTAFORMA
'VLTSCARTI_IDTICKET
'VLTSCARTI_IDTICKET_BC
'VLTSCARTI_MOTIVO
]
rd_kvar=[
'_prgscarti
'_dataimp
'cgo_vlt_sessioni->VLTSES_IDSESSIONE
'_codiceplat
'LRTrim(nextLine[0])
'''
'"Non è stato valorizzato l'importo out"
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='If
pag=4
prev=O1180
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1181
fatherSonIndex=0
frm_calc='_nomses
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1181
fatherSonIndex=1
frm_calc='_nomemi
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1181
fatherSonIndex=2
frm_calc='_nomcon
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O1103
fatherSonIndex=2
h=[
19
19
]
obj='Select
pag=4
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1258
fatherSonIndex=0
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
len=12
name='_nomses
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomses <> 0
'_nomses=0 and _nomemi<>0
'_nomses=0 and _nomemi=0 and _nomcon <> 0
]
h=[
19
19
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomout <> 0
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1263
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=5
father=O1266
fatherSonIndex=0
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / _nomout
len=10
name='_rapgino
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / cgo_vlt_sessioni->VLTSES_TOTALIN
len=10
name='_rapgiin
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_GROSWIN * 100) / _nomout
len=10
name='_rapvino
next=Icpitembatch.CPIfElse
frm_calc=[
'_rapgino < 20 or _rapgiin < 20 or _rapvino < 20
]
h=[
19
19
]
obj='If
pag=4
prev=O1273
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O1274
fatherSonIndex=0
frm_calc=[
'mcVLTREP.GoToKey(nextLine[0])
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1279
fatherSonIndex=0
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],2)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1288
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1287
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1286
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1285
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1284
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='prop
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1279
fatherSonIndex=1
frm_calc='LRTrim(nextLine[0])
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''COGETECH'
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_vltemi
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_nomout
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],2)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''C'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1307
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1306
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1305
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1304
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1303
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1302
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1301
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1300
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1299
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1298
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1297
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1296
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1295
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1294
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1293
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1292
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1291
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='meth
I
I
]
w=[
150
150
150
]
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='N
pag=4
prev=O1272
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1271
var_op='asgn
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1266
fatherSonIndex=1
frm_calc='Utilities.GetAutonumber("PRGVLTSCARTI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prgscarti
next=Icpitembatch.CPInsert
arch='cgo_vlt_scarti
obj='Insert
pag=4
prev=O1312
rd_kfield=[
'VLTSCARTI_PROG
'VLTSCARTI_DATAIMPORT
'VLTSCARTI_IDSESSIONE
'VLTSCARTI_PIATTAFORMA
'VLTSCARTI_IDTICKET
'VLTSCARTI_IDTICKET_BC
'VLTSCARTI_MOTIVO
]
rd_kvar=[
'_prgscarti
'_dataimp
'cgo_vlt_sessioni->VLTSES_IDSESSIONE
'_codiceplat
'LRTrim(nextLine[0])
'''
'"Non è stato valorizzato l'importo out"
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='If
pag=4
prev=O1262
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1263
fatherSonIndex=0
frm_calc='_nomses
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1263
fatherSonIndex=1
frm_calc='_nomemi
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1263
fatherSonIndex=2
frm_calc='_nomcon
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
prev=O1101
var_op='asgn
I
obj='Insert
pag=4
prev=O1100
rd_kfield=[
'VLTCON_IDPROG
'VLTCON_PIATTAFORMA
'VLTCON_IDTICKETOUT
'VLTCON_SALA
'VLTCON_VLT
'VLTCON_IMPORTO
'VLTCON_DATCONV
'VLTCON_IDSESCONV
'VLTCON_DATACREA
]
rd_kvar=[
'_prog
'_codiceplat
'nextLine[0]
'nextLine[1]
'nextLine[2]
'Val(nextLine[3]) / 100
'ConvDT(nextLine[4],2)
'nextLine[5]
'ConvDT(nextLine[6],2)
]
I
obj='Read
pag=4
prev=O1099
rd_field=[
'VLTEME_DATEMI
'VLTEME_VLT
'VLTEME_IMPORTO
]
rd_kfield=[
'VLTEME_PIATTAFORMA
'VLTEME_IDTICKETOUT
'VLTEME_SALA
]
rd_kvar=[
'_codiceplat
'_idticket
'_idsala
]
rd_var=[
'_dataemi
'_vltemi
'_nomemi
]
I
obj='Var
obj_type='N
pag=4
prev=O1098
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1097
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1096
var_op='asgn
I
obj='Var
pag=4
prev=O1095
var_op='asgn
I
obj='Var
obj_type='T
pag=4
prev=O1094
var_op='asgn
I
obj='Var
pag=4
prev=O1093
var_op='asgn
I
obj='Var
pag=4
prev=O1092
var_op='asgn
I
obj='Var
pag=4
prev=O1091
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1090
var_op='asgn
I
obj='Exec
pag=4
prev=O1089
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=4
prev=O792
sons=[
Icpitembatch.CPItemSon
collapsed=True
instr=Icpitembatch.CPIfElse
father=O794
fatherSonIndex=0
frm_calc=[
'_tipofile='N'
]
h=[
19
19
]
obj='If
pag=4
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1337
fatherSonIndex=0
frm_calc='0
len=10
name='_rownum
next=Icpitembatch.CPExec
check='man
frm_calc='// Legge il csv e scrive la tabella﷯String [] nextLine;﷯while ((nextLine = reader.readNext()) != null) {
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGVLTCVD\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prog
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
len=50
name='_idticket
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
len=50
name='_idsala
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[2])
len=50
name='_idvlt
next=Icpitembatch.CPVarDecl
frm_calc='NullDateTime()
len=14
name='_dataemi
next=Icpitembatch.CPVarDecl
dec=2
frm_calc='Val(nextLine[3])/100
len=12
name='_nomcon
next=Icpitembatch.CPVarDecl
dec=2
frm_calc='0
len=12
name='_nomemi
next=Icpitembatch.CPVarDecl
dec=2
frm_calc='0
len=12
name='_nomout
next=Icpitembatch.CPVarDecl
frm_calc='''
len=50
name='_vltemi
next=Icpitembatch.CPRead
arch='cgo_vlt_emessi
next=Icpitembatch.CPInsert
arch='cgo_vlt_convalidati
next=Icpitembatch.CPVarDecl
frm_calc='_rownum + 1
len=10
name='_rownum
next=Icpitembatch.CPIfElse
frm_calc=[
'Empty(LRTrim(nextLine[2])) and (Val(nextLine[3]) / 100) >= 500
'Empty(LRTrim(nextLine[2])) and ((Val(nextLine[3]) / 100) >= 400 and (Val(nextLine[3]) / 100) < 500)
'Empty(LRTrim(nextLine[2])) and ((Val(nextLine[3]) / 100) >= 100 and (Val(nextLine[3]) / 100) < 400)
]
h=[
19
19
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='_rownum + 1
len=10
name='_rownum
next=Icpitembatch.CPVarDecl
comment='Messaggio Trasferimento
frm_calc=''Sono state inserite '+LRTrim(Str(_rownum,10,0))+' convalide ...'
global=True
len=120
name='gMsgImp
next=Icpitembatch.CPExec
check='man
frm_calc='}﷯// Chiuse il file﷯reader.close();
obj='Exec
pag=4
prev=O1360
I
nonlocal=True
obj='Var
pag=4
prev=O1359
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1356
var_op='asgn
I
obj='If
pag=4
prev=O1355
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1356
fatherSonIndex=0
frm_calc='''
len=6
name='_coddip
next=Icpitembatch.CPIfElse
frm_calc=[
'mcANADIP.GoToKey(LRTrim(nextLine[1]))
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGTELEMATICO\'"+LRTrim(_gAzienda)+"'","",15)
len=15
name='_prgtele
next=Icpitembatch.CPInsert
arch='cgo_telematico
next=Icpitembatch.CPIfElse
frm_calc=[
'mcVLTREP.GoToKey(nextLine[0])
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1369
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1370
fatherSonIndex=0
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1376
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1375
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='prop
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O1370
fatherSonIndex=1
h=[
19
19
]
obj='Select
pag=4
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1379
fatherSonIndex=0
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
len=12
name='_nomses
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomses <> 0
'_nomses=0 and _nomemi<>0
'_nomses=0 and _nomemi=0 and _nomcon <> 0
]
h=[
19
19
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomout <> 0
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1384
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1387
fatherSonIndex=0
frm_calc='LRTrim(nextLine[0])
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='iif(At('snai',_nomefile) <> 0,'SNAI','COGETECH')
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_vltemi
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_nomout
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''C'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1405
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1404
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1403
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1402
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1401
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1400
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1399
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1398
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1397
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1396
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1395
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1394
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1393
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1392
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='meth
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1387
fatherSonIndex=1
frm_calc='Utilities.GetAutonumber("PRGVLTSCARTI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prgscarti
next=Icpitembatch.CPInsert
arch='cgo_vlt_scarti
obj='Insert
pag=4
prev=O1408
rd_kfield=[
'VLTSCARTI_PROG
'VLTSCARTI_DATAIMPORT
'VLTSCARTI_IDSESSIONE
'VLTSCARTI_PIATTAFORMA
'VLTSCARTI_IDTICKET
'VLTSCARTI_IDTICKET_BC
'VLTSCARTI_MOTIVO
]
rd_kvar=[
'_prgscarti
'_dataimp
'cgo_vlt_sessioni->VLTSES_IDSESSIONE
'_codiceplat
'LRTrim(nextLine[0])
'''
'"Non è stato valorizzato l'importo out"
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='If
pag=4
prev=O1383
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1384
fatherSonIndex=0
frm_calc='_nomses
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1384
fatherSonIndex=1
frm_calc='_nomemi
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1384
fatherSonIndex=2
frm_calc='_nomcon
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
150
]
I
obj='Insert
pag=4
prev=O1368
rd_kfield=[
'SNAINUMOPE
'ENV
'CODDIPE
'TOTLIRE
'CACODICE
'CADATAORA
'CAIDBIGLIETTO
'TIPOGIOCO
'CODLOB
'VPCODICE
]
rd_kvar=[
''V'+Right(LRTrim(_prgtele),14)
''V'
'_coddip
'Val(nextLine[3]) / 100
''3'
'ConvDT(nextLine[4],1)
'nextLine[0]
''V'
''VLT'
'_platcod
]
I
obj='Var
pag=4
prev=O1365
var_op='asgn
I
obj='If
pag=4
prev=O1364
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1365
fatherSonIndex=0
frm_calc='mcANADIP.CODDIP
len=6
name='_coddip
obj='Var
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O1356
fatherSonIndex=1
h=[
19
19
]
obj='Select
pag=4
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1430
fatherSonIndex=0
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
len=12
name='_nomses
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomses <> 0
'_nomses=0 and _nomemi<>0
'_nomses=0 and _nomemi=0 and _nomcon <> 0
]
h=[
19
19
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomout <> 0
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1435
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=5
father=O1438
fatherSonIndex=0
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / _nomout
len=10
name='_rapgino
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / cgo_vlt_sessioni->VLTSES_TOTALIN
len=10
name='_rapgiin
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_GROSWIN * 100) / _nomout
len=10
name='_rapvino
next=Icpitembatch.CPIfElse
frm_calc=[
'_rapgino < 20 or _rapgiin < 20 or _rapvino < 20
]
h=[
19
19
]
obj='If
pag=4
prev=O1445
sons=[
Icpitembatch.CPItemSon
collapsed=True
instr=Icpitembatch.CPVarDecl
father=O1446
fatherSonIndex=0
frm_calc='''
len=6
name='_coddip
next=Icpitembatch.CPIfElse
frm_calc=[
'mcANADIP.GoToKey(LRTrim(nextLine[1]))
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGTELEMATICO\'"+LRTrim(_gAzienda)+"'","",15)
len=15
name='_prgtele
next=Icpitembatch.CPInsert
arch='cgo_telematico
next=Icpitembatch.CPIfElse
frm_calc=[
'mcVLTREP.GoToKey(nextLine[0])
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1456
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1457
fatherSonIndex=0
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1466
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1465
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1464
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1463
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1462
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='prop
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1457
fatherSonIndex=1
frm_calc='LRTrim(nextLine[0])
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='iif(At('snai',_nomefile) <> 0,'SNAI','COGETECH')
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_vltemi
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_nomout
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''C'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1485
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1484
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1483
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1482
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1481
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1480
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1479
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1478
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1477
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1476
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1475
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1474
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1473
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1472
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1471
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1470
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1469
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='meth
I
I
]
w=[
150
150
150
]
I
obj='Insert
pag=4
prev=O1455
rd_kfield=[
'SNAINUMOPE
'ENV
'CODDIPE
'TOTLIRE
'CACODICE
'CADATAORA
'CAIDBIGLIETTO
'TIPOGIOCO
'CODLOB
'VPCODICE
]
rd_kvar=[
''V'+Right(LRTrim(_prgtele),14)
''V'
'_coddip
'Val(nextLine[3]) / 100
''3'
'ConvDT(nextLine[4],1)
'nextLine[0]
''V'
''VLT'
'_platcod
]
I
obj='Var
pag=4
prev=O1452
var_op='asgn
I
obj='If
pag=4
prev=O1451
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1452
fatherSonIndex=0
frm_calc='mcANADIP.CODDIP
len=6
name='_coddip
obj='Var
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='N
pag=4
prev=O1444
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1443
var_op='asgn
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1438
fatherSonIndex=1
frm_calc='Utilities.GetAutonumber("PRGVLTSCARTI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prgscarti
next=Icpitembatch.CPInsert
arch='cgo_vlt_scarti
obj='Insert
pag=4
prev=O1496
rd_kfield=[
'VLTSCARTI_PROG
'VLTSCARTI_DATAIMPORT
'VLTSCARTI_IDSESSIONE
'VLTSCARTI_PIATTAFORMA
'VLTSCARTI_IDTICKET
'VLTSCARTI_IDTICKET_BC
'VLTSCARTI_MOTIVO
]
rd_kvar=[
'_prgscarti
'_dataimp
'cgo_vlt_sessioni->VLTSES_IDSESSIONE
'_codiceplat
'LRTrim(nextLine[0])
'''
'"Non è stato valorizzato l'importo out"
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='If
pag=4
prev=O1434
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1435
fatherSonIndex=0
frm_calc='_nomses
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1435
fatherSonIndex=1
frm_calc='_nomemi
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1435
fatherSonIndex=2
frm_calc='_nomcon
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O1356
fatherSonIndex=2
h=[
19
19
]
obj='Select
pag=4
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1511
fatherSonIndex=0
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
len=12
name='_nomses
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomses <> 0
'_nomses=0 and _nomemi<>0
'_nomses=0 and _nomemi=0 and _nomcon <> 0
]
h=[
19
19
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomout <> 0
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1516
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=5
father=O1519
fatherSonIndex=0
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / _nomout
len=10
name='_rapgino
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / cgo_vlt_sessioni->VLTSES_TOTALIN
len=10
name='_rapgiin
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_GROSWIN * 100) / _nomout
len=10
name='_rapvino
next=Icpitembatch.CPIfElse
frm_calc=[
'_rapgino < 20 or _rapgiin < 20 or _rapvino < 20
]
h=[
19
19
]
obj='If
pag=4
prev=O1526
sons=[
Icpitembatch.CPItemSon
collapsed=True
instr=Icpitembatch.CPIfElse
father=O1527
fatherSonIndex=0
frm_calc=[
'mcVLTREP.GoToKey(nextLine[0])
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1532
fatherSonIndex=0
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1541
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1540
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1539
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1538
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1537
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='prop
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1532
fatherSonIndex=1
frm_calc='LRTrim(nextLine[0])
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='iif(At('snai',_nomefile) <> 0,'SNAI','COGETECH')
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_vltemi
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_nomout
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''C'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1560
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1559
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1558
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1557
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1556
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1555
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1554
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1553
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1552
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1551
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1550
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1549
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1548
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1547
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1546
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1545
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1544
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='meth
I
I
]
w=[
150
150
150
]
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='N
pag=4
prev=O1525
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1524
var_op='asgn
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1519
fatherSonIndex=1
frm_calc='Utilities.GetAutonumber("PRGVLTSCARTI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prgscarti
next=Icpitembatch.CPInsert
arch='cgo_vlt_scarti
obj='Insert
pag=4
prev=O1565
rd_kfield=[
'VLTSCARTI_PROG
'VLTSCARTI_DATAIMPORT
'VLTSCARTI_IDSESSIONE
'VLTSCARTI_PIATTAFORMA
'VLTSCARTI_IDTICKET
'VLTSCARTI_IDTICKET_BC
'VLTSCARTI_MOTIVO
]
rd_kvar=[
'_prgscarti
'_dataimp
'cgo_vlt_sessioni->VLTSES_IDSESSIONE
'_codiceplat
'LRTrim(nextLine[0])
'''
'"Non è stato valorizzato l'importo out"
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='If
pag=4
prev=O1515
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1516
fatherSonIndex=0
frm_calc='_nomses
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1516
fatherSonIndex=1
frm_calc='_nomemi
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1516
fatherSonIndex=2
frm_calc='_nomcon
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
prev=O1354
var_op='asgn
I
obj='Insert
pag=4
prev=O1353
rd_kfield=[
'VLTCON_IDPROG
'VLTCON_PIATTAFORMA
'VLTCON_IDTICKETOUT
'VLTCON_SALA
'VLTCON_VLT
'VLTCON_IMPORTO
'VLTCON_DATCONV
'VLTCON_IDSESCONV
'VLTCON_DATACREA
]
rd_kvar=[
'_prog
'_codiceplat
'nextLine[0]
'nextLine[1]
'nextLine[2]
'Val(nextLine[3]) / 100
'ConvDT(nextLine[4],1)
'nextLine[5]
'ConvDT(nextLine[6],1)
]
I
obj='Read
pag=4
prev=O1352
rd_field=[
'VLTEME_DATEMI
'VLTEME_VLT
'VLTEME_IMPORTO
]
rd_kfield=[
'VLTEME_PIATTAFORMA
'VLTEME_IDTICKETOUT
'VLTEME_SALA
]
rd_kvar=[
'_codiceplat
'_idticket
'_idsala
]
rd_var=[
'_dataemi
'_vltemi
'_nomemi
]
I
obj='Var
pag=4
prev=O1351
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1350
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1349
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1348
var_op='asgn
I
obj='Var
obj_type='T
pag=4
prev=O1347
var_op='asgn
I
obj='Var
pag=4
prev=O1346
var_op='asgn
I
obj='Var
pag=4
prev=O1345
var_op='asgn
I
obj='Var
pag=4
prev=O1344
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1343
var_op='asgn
I
obj='Exec
pag=4
prev=O1342
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=4
prev=O790
sons=[
Icpitembatch.CPItemSon
collapsed=True
instr=Icpitembatch.CPIfElse
father=O792
fatherSonIndex=0
frm_calc=[
'_tipofile='S'
]
h=[
19
19
]
obj='If
pag=4
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1590
fatherSonIndex=0
frm_calc='0
len=10
name='_rownum
next=Icpitembatch.CPExec
check='man
frm_calc='// Legge il csv e scrive la tabella﷯String [] nextLine;﷯while ((nextLine = reader.readNext()) != null) {
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGVLTCVD\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prog
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
len=50
name='_idticket
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
len=50
name='_idsala
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[2])
len=50
name='_idvlt
next=Icpitembatch.CPVarDecl
dec=2
frm_calc='Val(nextLine[3])/100
len=12
name='_nomcon
next=Icpitembatch.CPVarDecl
frm_calc='NullDateTime()
len=14
name='_dataemi
next=Icpitembatch.CPVarDecl
frm_calc='''
len=50
name='_vltemi
next=Icpitembatch.CPVarDecl
dec=2
frm_calc='0
len=12
name='_nomemi
next=Icpitembatch.CPVarDecl
dec=2
frm_calc='0
len=12
name='_nomout
next=Icpitembatch.CPRead
arch='cgo_vlt_emessi
next=Icpitembatch.CPInsert
arch='cgo_vlt_convalidati
next=Icpitembatch.CPVarDecl
frm_calc='_rownum + 1
len=10
name='_rownum
next=Icpitembatch.CPIfElse
frm_calc=[
'Empty(LRTrim(nextLine[2])) and (Val(nextLine[3]) / 100) >= 500
'Empty(LRTrim(nextLine[2])) and ((Val(nextLine[3]) / 100) >= 400 and (Val(nextLine[3]) / 100) < 500)
'Empty(LRTrim(nextLine[2])) and ((Val(nextLine[3]) / 100) >= 100 and (Val(nextLine[3]) / 100) < 400)
]
h=[
19
19
19
19
]
next=Icpitembatch.CPVarDecl
comment='Messaggio Trasferimento
frm_calc=''Sono state inserite '+LRTrim(Str(_rownum,10,0))+' convalide ...'
global=True
len=120
name='gMsgImp
next=Icpitembatch.CPExec
check='man
frm_calc='}﷯// Chiuse il file﷯reader.close();
obj='Exec
pag=4
prev=O1612
I
nonlocal=True
obj='Var
pag=4
prev=O1609
var_op='asgn
I
obj='If
pag=4
prev=O1608
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1609
fatherSonIndex=0
frm_calc='''
len=6
name='_coddip
next=Icpitembatch.CPIfElse
frm_calc=[
'mcANADIP.GoToKey(LRTrim(nextLine[1]))
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGTELEMATICO\'"+LRTrim(_gAzienda)+"'","",15)
len=15
name='_prgtele
next=Icpitembatch.CPInsert
arch='cgo_telematico
next=Icpitembatch.CPIfElse
frm_calc=[
'mcVLTREP.GoToKey(nextLine[0])
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1621
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1622
fatherSonIndex=0
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1628
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1627
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='prop
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O1622
fatherSonIndex=1
h=[
19
19
]
obj='Select
pag=4
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1631
fatherSonIndex=0
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
len=12
name='_nomses
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomses <> 0
'_nomses=0 and _nomemi<>0
'_nomses=0 and _nomemi=0 and _nomcon <> 0
]
h=[
19
19
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomout <> 0
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1636
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1639
fatherSonIndex=0
frm_calc='LRTrim(nextLine[0])
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='iif(At('snai',_nomefile) <> 0,'SNAI','COGETECH')
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_vltemi
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_nomout
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''C'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1657
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1656
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1655
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1654
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1653
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1652
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1651
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1650
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1649
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1648
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1647
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1646
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1645
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1644
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='meth
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1639
fatherSonIndex=1
frm_calc='Utilities.GetAutonumber("PRGVLTSCARTI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prgscarti
next=Icpitembatch.CPInsert
arch='cgo_vlt_scarti
obj='Insert
pag=4
prev=O1660
rd_kfield=[
'VLTSCARTI_PROG
'VLTSCARTI_DATAIMPORT
'VLTSCARTI_IDSESSIONE
'VLTSCARTI_PIATTAFORMA
'VLTSCARTI_IDTICKET
'VLTSCARTI_IDTICKET_BC
'VLTSCARTI_MOTIVO
]
rd_kvar=[
'_prgscarti
'_dataimp
'cgo_vlt_sessioni->VLTSES_IDSESSIONE
'_codiceplat
'LRTrim(nextLine[0])
'''
'"Non è stato valorizzato l'importo out"
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='If
pag=4
prev=O1635
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1636
fatherSonIndex=0
frm_calc='_nomses
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1636
fatherSonIndex=1
frm_calc='_nomemi
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1636
fatherSonIndex=2
frm_calc='_nomcon
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
150
]
I
obj='Insert
pag=4
prev=O1620
rd_kfield=[
'SNAINUMOPE
'ENV
'CODDIPE
'TOTLIRE
'CACODICE
'CADATAORA
'CAIDBIGLIETTO
'TIPOGIOCO
'CODLOB
'VPCODICE
]
rd_kvar=[
''V'+Right(LRTrim(_prgtele),14)
''V'
'_coddip
'Val(nextLine[3]) / 100
''3'
'ConvDT(nextLine[4],1)
'nextLine[0]
''V'
''VLT'
'_platcod
]
I
obj='Var
pag=4
prev=O1617
var_op='asgn
I
obj='If
pag=4
prev=O1616
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1617
fatherSonIndex=0
frm_calc='mcANADIP.CODDIP
len=6
name='_coddip
obj='Var
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O1609
fatherSonIndex=1
h=[
19
19
]
obj='Select
pag=4
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1682
fatherSonIndex=0
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
len=12
name='_nomses
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomses <> 0
'_nomses=0 and _nomemi<>0
'_nomses=0 and _nomemi=0 and _nomcon <> 0
]
h=[
19
19
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomout <> 0
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1687
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=5
father=O1690
fatherSonIndex=0
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / _nomout
len=10
name='_rapgino
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / cgo_vlt_sessioni->VLTSES_TOTALIN
len=10
name='_rapgiin
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_GROSWIN * 100) / _nomout
len=10
name='_rapvino
next=Icpitembatch.CPIfElse
frm_calc=[
'_rapgino < 20 or _rapgiin < 20 or _rapvino < 20
]
h=[
19
19
]
obj='If
pag=4
prev=O1697
sons=[
Icpitembatch.CPItemSon
collapsed=True
instr=Icpitembatch.CPVarDecl
father=O1698
fatherSonIndex=0
frm_calc='''
len=6
name='_coddip
next=Icpitembatch.CPIfElse
frm_calc=[
'mcANADIP.GoToKey(LRTrim(nextLine[1]))
]
h=[
19
19
]
next=Icpitembatch.CPVarDecl
frm_calc='Utilities.GetAutonumber("PRGTELEMATICO\'"+LRTrim(_gAzienda)+"'","",15)
len=15
name='_prgtele
next=Icpitembatch.CPInsert
arch='cgo_telematico
next=Icpitembatch.CPIfElse
frm_calc=[
'mcVLTREP.GoToKey(nextLine[0])
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1708
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1709
fatherSonIndex=0
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1718
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1717
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1716
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1715
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1714
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='prop
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1709
fatherSonIndex=1
frm_calc='LRTrim(nextLine[0])
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='iif(At('snai',_nomefile) <> 0,'SNAI','COGETECH')
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_vltemi
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_nomout
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''C'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1737
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1736
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1735
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1734
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1733
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1732
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1731
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1730
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1729
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1728
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1727
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1726
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1725
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1724
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1723
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1722
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1721
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='meth
I
I
]
w=[
150
150
150
]
I
obj='Insert
pag=4
prev=O1707
rd_kfield=[
'SNAINUMOPE
'ENV
'CODDIPE
'TOTLIRE
'CACODICE
'CADATAORA
'CAIDBIGLIETTO
'TIPOGIOCO
'CODLOB
'VPCODICE
]
rd_kvar=[
''V'+Right(LRTrim(_prgtele),14)
''V'
'_coddip
'Val(nextLine[3]) / 100
''3'
'ConvDT(nextLine[4],1)
'nextLine[0]
''V'
''VLT'
'_platcod
]
I
obj='Var
pag=4
prev=O1704
var_op='asgn
I
obj='If
pag=4
prev=O1703
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1704
fatherSonIndex=0
frm_calc='mcANADIP.CODDIP
len=6
name='_coddip
obj='Var
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='N
pag=4
prev=O1696
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1695
var_op='asgn
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1690
fatherSonIndex=1
frm_calc='Utilities.GetAutonumber("PRGVLTSCARTI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prgscarti
next=Icpitembatch.CPInsert
arch='cgo_vlt_scarti
obj='Insert
pag=4
prev=O1748
rd_kfield=[
'VLTSCARTI_PROG
'VLTSCARTI_DATAIMPORT
'VLTSCARTI_IDSESSIONE
'VLTSCARTI_PIATTAFORMA
'VLTSCARTI_IDTICKET
'VLTSCARTI_IDTICKET_BC
'VLTSCARTI_MOTIVO
]
rd_kvar=[
'_prgscarti
'_dataimp
'cgo_vlt_sessioni->VLTSES_IDSESSIONE
'_codiceplat
'LRTrim(nextLine[0])
'''
'"Non è stato valorizzato l'importo out"
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='If
pag=4
prev=O1686
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1687
fatherSonIndex=0
frm_calc='_nomses
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1687
fatherSonIndex=1
frm_calc='_nomemi
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1687
fatherSonIndex=2
frm_calc='_nomcon
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPSelect
father=O1609
fatherSonIndex=2
h=[
19
19
]
obj='Select
pag=4
sel_field='*
sel_name='cgo_vlt_sessioni
sel_where='cgo_vlt_sessioni->VLTSES_IDTICKETOUT=_idticket and cgo_vlt_sessioni->VLTSES_SALA=_idsala and cgo_vlt_sessioni->VLTSES_PIATTAFORMA=_codiceplat
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1763
fatherSonIndex=0
frm_calc='cgo_vlt_sessioni->VLTSES_OUT
len=12
name='_nomses
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomses <> 0
'_nomses=0 and _nomemi<>0
'_nomses=0 and _nomemi=0 and _nomcon <> 0
]
h=[
19
19
19
19
]
next=Icpitembatch.CPIfElse
frm_calc=[
'_nomout <> 0
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
prev=O1768
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=5
father=O1771
fatherSonIndex=0
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / _nomout
len=10
name='_rapgino
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_BETIMP * 100) / cgo_vlt_sessioni->VLTSES_TOTALIN
len=10
name='_rapgiin
next=Icpitembatch.CPVarDecl
dec=5
frm_calc='(cgo_vlt_sessioni->VLTSES_GROSWIN * 100) / _nomout
len=10
name='_rapvino
next=Icpitembatch.CPIfElse
frm_calc=[
'_rapgino < 20 or _rapgiin < 20 or _rapvino < 20
]
h=[
19
19
]
obj='If
pag=4
prev=O1778
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O1779
fatherSonIndex=0
frm_calc=[
'mcVLTREP.GoToKey(nextLine[0])
]
h=[
19
19
19
]
haselse=True
obj='If
pag=4
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1784
fatherSonIndex=0
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1793
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1792
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1791
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1790
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1789
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='prop
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1784
fatherSonIndex=1
frm_calc='LRTrim(nextLine[0])
frm_seek='AppendWithKey
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[1])
frm_seek='VLTREP_AAMSSALA
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_codiceplat
frm_seek='VLTREP_CODPLAT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='iif(At('snai',_nomefile) <> 0,'SNAI','COGETECH')
frm_seek='VLTREP_CODCONC
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(nextLine[0])
frm_seek='VLTREP_IDTICKET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_vltemi
frm_seek='VLTREP_AAMSVLT
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_nomout
frm_seek='VLTREP_VALNOM
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_BETIMP
frm_seek='VLTREP_IMPBET
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_GROSWIN
frm_seek='VLTREP_GROSWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_NETWIN
frm_seek='VLTREP_NETWIN
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='arfn_dttod(_dataemi)
frm_seek='VLTREP_DATAEMI
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='ConvD(nextLine[4],1)
frm_seek='VLTREP_DATACONV
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgino
frm_seek='VLTREP_RAPPORTO1
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapgiin
frm_seek='VLTREP_RAPPORTO2
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='_rapvino
frm_seek='VLTREP_RAPPORTO3
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc='cgo_vlt_sessioni->VLTSES_TOTALIN
frm_seek='VLTREP_TOTALE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_calc=''C'
frm_seek='VLTREP_ORIGINE
name='mcVLTREP
next=Icpitembatch.CPVarDecl
frm_seek='SaveRow
name='mcVLTREP
obj='Var
obj_type='MC
pag=4
prev=O1812
var_op='meth
I
obj='Var
obj_type='MC
pag=4
prev=O1811
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1810
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1809
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1808
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1807
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1806
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1805
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1804
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1803
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1802
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1801
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1800
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1799
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1798
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1797
var_op='prop
I
obj='Var
obj_type='MC
pag=4
prev=O1796
var_op='prop
I
obj='Var
obj_type='MC
pag=4
var_op='meth
I
I
]
w=[
150
150
150
]
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='N
pag=4
prev=O1777
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1776
var_op='asgn
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1771
fatherSonIndex=1
frm_calc='Utilities.GetAutonumber("PRGVLTSCARTI\'"+LRTrim(_gAzienda)+"'",0,20)
len=20
name='_prgscarti
next=Icpitembatch.CPInsert
arch='cgo_vlt_scarti
obj='Insert
pag=4
prev=O1817
rd_kfield=[
'VLTSCARTI_PROG
'VLTSCARTI_DATAIMPORT
'VLTSCARTI_IDSESSIONE
'VLTSCARTI_PIATTAFORMA
'VLTSCARTI_IDTICKET
'VLTSCARTI_IDTICKET_BC
'VLTSCARTI_MOTIVO
]
rd_kvar=[
'_prgscarti
'_dataimp
'cgo_vlt_sessioni->VLTSES_IDSESSIONE
'_codiceplat
'LRTrim(nextLine[0])
'''
'"Non è stato valorizzato l'importo out"
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='If
pag=4
prev=O1767
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1768
fatherSonIndex=0
frm_calc='_nomses
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1768
fatherSonIndex=1
frm_calc='_nomemi
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
dec=2
father=O1768
fatherSonIndex=2
frm_calc='_nomcon
len=12
name='_nomout
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
150
150
]
I
obj='Var
obj_type='N
pag=4
prev=O1607
var_op='asgn
I
obj='Insert
pag=4
prev=O1606
rd_kfield=[
'VLTCON_IDPROG
'VLTCON_PIATTAFORMA
'VLTCON_IDTICKETOUT
'VLTCON_SALA
'VLTCON_VLT
'VLTCON_IMPORTO
'VLTCON_DATCONV
'VLTCON_IDSESEMIS
'VLTCON_FLGAML
'VLTCON_DATACREA
]
rd_kvar=[
'_prog
'_codiceplat
'nextLine[0]
'nextLine[1]
'nextLine[2]
'Val(nextLine[3]) / 100
'ConvDT(nextLine[4],1)
'nextLine[5]
'nextLine[6]
'ConvDT(nextLine[7],1)
]
I
obj='Read
pag=4
prev=O1605
rd_field=[
'VLTEME_DATEMI
'VLTEME_VLT
'VLTEME_IMPORTO
]
rd_kfield=[
'VLTEME_PIATTAFORMA
'VLTEME_IDTICKETOUT
'VLTEME_SALA
]
rd_kvar=[
'_codiceplat
'_idticket
'_idsala
]
rd_var=[
'_dataemi
'_vltemi
'_nomemi
]
I
obj='Var
obj_type='N
pag=4
prev=O1604
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1603
var_op='asgn
I
obj='Var
pag=4
prev=O1602
var_op='asgn
I
obj='Var
obj_type='T
pag=4
prev=O1601
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1600
var_op='asgn
I
obj='Var
pag=4
prev=O1599
var_op='asgn
I
obj='Var
pag=4
prev=O1598
var_op='asgn
I
obj='Var
pag=4
prev=O1597
var_op='asgn
I
obj='Var
obj_type='N
pag=4
prev=O1596
var_op='asgn
I
obj='Exec
pag=4
prev=O1595
I
obj='Var
obj_type='N
pag=4
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=4
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPExec
check='man
father=O790
fatherSonIndex=0
frm_calc='// Crea il lettore con i parametri di separatore e testata﷯FileReader freader=new FileReader(_nomefile);﷯CSVParser parser = new CSVParserBuilder().withSeparator(_separator.charAt(0)).build();﷯CSVReader reader = new CSVReaderBuilder(freader).withSkipLines((int)_intesta).withCSVParser(parser).build();
obj='Exec
pag=4
I
I
]
w=[
150
150
]
x=16
y=19
I
Icpitembatch.CPBeginEnd
comment='Parametro
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Variabili Locali
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Converte data ora da carattere a DateTime
h=[
19
19
]
next=Ispitembatch.CPReturn
frm_calc='dtRitorno
obj='Return
pag=6
page_return=True
prev=O1848
I
obj='Begin
pag=6
prev=O1846
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O1848
fatherSonIndex=0
frm_calc=[
'pFormato=1
]
h=[
19
19
19
]
haselse=True
next=Icpitembatch.CPVarDecl
frm_calc='CharToDate(LRTrim(_data))
len=8
name='dtRitorno
obj='Var
obj_type='D
pag=6
pagelocal=True
prev=O1853
var_op='asgn
I
obj='If
pag=6
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1853
fatherSonIndex=0
frm_calc='Left(pDataOra,4)+Substr(pDataOra,6,2)+Substr(pDataOra,9,2)
len=8
name='_data
obj='Var
pag=6
pagelocal=True
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1853
fatherSonIndex=1
frm_calc='Substr(pDataOra,7,4)+Substr(pDataOra,4,2)+Left(pDataOra,2)
len=8
name='_data
obj='Var
pag=6
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=6
prev=O1844
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1846
fatherSonIndex=0
len=8
name='_data
next=Icpitembatch.CPVarDecl
len=6
name='_ora
next=Icpitembatch.CPVarDecl
len=8
name='dtRitorno
obj='Var
obj_type='D
pag=6
pagelocal=True
prev=O1867
I
obj='Var
pag=6
pagelocal=True
prev=O1866
I
obj='Var
pag=6
pagelocal=True
I
I
]
w=[
150
150
]
I
obj='Begin
pag=6
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1844
fatherSonIndex=0
len=20
name='pDataOra
next=Icpitembatch.CPVarDecl
len=1
name='pFormato
obj='Var
obj_type='N
pag=6
pageparam=True
prev=O1872
I
obj='Var
pag=6
pageparam=True
I
I
]
w=[
150
150
]
x=11
y=16
I
Icpitembatch.CPBeginEnd
comment='Parametri
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Definizione variabili locali
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Controlla i file
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Creazione del file con la chiave
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Inizializza array per controllo primo file
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Inizializza array per controllo secondo file
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Inizializza array per controllo terzo file
h=[
19
19
]
next=Ispitembatch.CPReturn
frm_calc='cReturn
obj='Return
pag=7
page_return=True
prev=O1887
I
obj='Begin
pag=7
prev=O1885
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O1887
fatherSonIndex=0
frm_calc=[
'cReturn='S'
]
h=[
19
19
]
obj='If
pag=7
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1892
fatherSonIndex=0
frm_calc='LRTrim(pRow.DIRBASE)+"/"+LRTrim(pRow.NOMEDIR)+"/"+Strtran(LRTrim(pRow.NOMEFILE3),'.csv','.signed')
len=256
name='_signedfile
next=Icpitembatch.CPIfElse
frm_calc=[
'FileLibMit.ExistFile(_signedfile)
]
h=[
19
19
19
]
haselse=True
obj='If
pag=7
prev=O1897
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1898
fatherSonIndex=0
frm_calc='LRTrim(pRow.DIRBASE)+"/"+LRTrim(pRow.NOMEDIR)+"/"+LRTrim(pRow.NOMEFILE3)
len=256
name='_deffile
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(_gPathDoc)+"/VLT/"+LRTrim(_gAzienda)+"/"+LRTrim(pRow.NOMEDIR)+"/check.sha256"
len=256
name='_outfile
next=Icpitembatch.CPVarDecl
frm_calc='"openssl base64 -d -in "+LRTrim(_signedfile)+" -out "+LRTrim(_outfile)
len=10
name='_command
next=Icpitembatch.CPVarDecl
frm_calc='Runtime.getRuntime().exec(_command)
name='_process
next=Icpitembatch.CPExec
check='man
frm_calc='// Stampa valori﷯exitVal = _process.waitFor();
next=Icpitembatch.CPIfElse
frm_calc=[
'exitVal=0
]
h=[
19
19
]
obj='If
pag=7
prev=O1907
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1908
fatherSonIndex=0
frm_calc='"openssl dgst -sha256 -verify "+LRTrim(_pemfile)+" -signature "+LRTrim(_outfile)+" "+LRTrim(_deffile)
len=10
name='_command
next=Icpitembatch.CPVarDecl
frm_calc='Runtime.getRuntime().exec(_command)
name='_process
next=Icpitembatch.CPExec
check='man
frm_calc='// Stampa valori﷯exitVal = _process.waitFor();
next=Icpitembatch.CPIfElse
frm_calc=[
'exitVal=1
]
h=[
19
19
]
obj='If
pag=7
prev=O1915
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
comment='Variabile di ritorno
father=O1916
fatherSonIndex=0
frm_calc=''N'
len=1
name='cReturn
obj='Var
pag=7
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Exec
pag=7
prev=O1914
I
obj='Var
obj_type='O
pag=7
pagelocal=True
prev=O1913
var_op='asgn
I
obj='Var
obj_type='M
pag=7
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Exec
pag=7
prev=O1906
I
obj='Var
obj_type='O
pag=7
pagelocal=True
prev=O1905
var_op='asgn
I
obj='Var
obj_type='M
pag=7
pagelocal=True
prev=O1904
var_op='asgn
I
obj='Var
pag=7
pagelocal=True
prev=O1903
var_op='asgn
I
obj='Var
pag=7
pagelocal=True
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
comment='Variabile di ritorno
father=O1898
fatherSonIndex=1
frm_calc=''N'
len=1
name='cReturn
obj='Var
pag=7
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='Var
pag=7
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=7
prev=O1883
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O1885
fatherSonIndex=0
frm_calc=[
'cReturn='S'
]
h=[
19
19
]
obj='If
pag=7
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1931
fatherSonIndex=0
frm_calc='LRTrim(pRow.DIRBASE)+"/"+LRTrim(pRow.NOMEDIR)+"/"+Strtran(LRTrim(pRow.NOMEFILE2),'.csv','.signed')
len=256
name='_signedfile
next=Icpitembatch.CPIfElse
frm_calc=[
'FileLibMit.ExistFile(_signedfile)
]
h=[
19
19
19
]
haselse=True
obj='If
pag=7
prev=O1936
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1937
fatherSonIndex=0
frm_calc='LRTrim(pRow.DIRBASE)+"/"+LRTrim(pRow.NOMEDIR)+"/"+LRTrim(pRow.NOMEFILE2)
len=256
name='_deffile
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(_gPathDoc)+"/VLT/"+LRTrim(_gAzienda)+"/"+LRTrim(pRow.NOMEDIR)+"/check.sha256"
len=256
name='_outfile
next=Icpitembatch.CPVarDecl
frm_calc='"openssl base64 -d -in "+LRTrim(_signedfile)+" -out "+LRTrim(_outfile)
len=10
name='_command
next=Icpitembatch.CPVarDecl
frm_calc='Runtime.getRuntime().exec(_command)
name='_process
next=Icpitembatch.CPExec
check='man
frm_calc='// Stampa valori﷯exitVal = _process.waitFor();
next=Icpitembatch.CPIfElse
frm_calc=[
'exitVal=0
]
h=[
19
19
]
obj='If
pag=7
prev=O1946
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1947
fatherSonIndex=0
frm_calc='"openssl dgst -sha256 -verify "+LRTrim(_pemfile)+" -signature "+LRTrim(_outfile)+" "+LRTrim(_deffile)
len=10
name='_command
next=Icpitembatch.CPVarDecl
frm_calc='Runtime.getRuntime().exec(_command)
name='_process
next=Icpitembatch.CPExec
check='man
frm_calc='// Stampa valori﷯exitVal = _process.waitFor();
next=Icpitembatch.CPIfElse
frm_calc=[
'exitVal=1
]
h=[
19
19
]
obj='If
pag=7
prev=O1954
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
comment='Variabile di ritorno
father=O1955
fatherSonIndex=0
frm_calc=''N'
len=1
name='cReturn
obj='Var
pag=7
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Exec
pag=7
prev=O1953
I
obj='Var
obj_type='O
pag=7
pagelocal=True
prev=O1952
var_op='asgn
I
obj='Var
obj_type='M
pag=7
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Exec
pag=7
prev=O1945
I
obj='Var
obj_type='O
pag=7
pagelocal=True
prev=O1944
var_op='asgn
I
obj='Var
obj_type='M
pag=7
pagelocal=True
prev=O1943
var_op='asgn
I
obj='Var
pag=7
pagelocal=True
prev=O1942
var_op='asgn
I
obj='Var
pag=7
pagelocal=True
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
comment='Variabile di ritorno
father=O1937
fatherSonIndex=1
frm_calc=''N'
len=1
name='cReturn
obj='Var
pag=7
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='Var
pag=7
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Begin
pag=7
prev=O1881
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1883
fatherSonIndex=0
frm_calc='LRTrim(pRow.DIRBASE)+"/"+LRTrim(pRow.NOMEDIR)+"/"+Strtran(LRTrim(pRow.NOMEFILE1),'.csv','.signed')
len=256
name='_signedfile
next=Icpitembatch.CPIfElse
frm_calc=[
'FileLibMit.ExistFile(_signedfile)
]
h=[
19
19
19
]
haselse=True
obj='If
pag=7
prev=O1970
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1971
fatherSonIndex=0
frm_calc='LRTrim(pRow.DIRBASE)+"/"+LRTrim(pRow.NOMEDIR)+"/"+LRTrim(pRow.NOMEFILE1)
len=256
name='_deffile
next=Icpitembatch.CPVarDecl
frm_calc='LRTrim(_gPathDoc)+"/VLT/"+LRTrim(_gAzienda)+"/"+LRTrim(pRow.NOMEDIR)+"/check.sha256"
len=256
name='_outfile
next=Icpitembatch.CPVarDecl
frm_calc='"openssl base64 -d -in "+LRTrim(_signedfile)+" -out "+LRTrim(_outfile)
len=10
name='_command
next=Icpitembatch.CPVarDecl
frm_calc='Runtime.getRuntime().exec(_command)
name='_process
next=Icpitembatch.CPExec
check='man
frm_calc='// Stampa valori﷯exitVal = _process.waitFor();
next=Icpitembatch.CPIfElse
frm_calc=[
'exitVal=0
]
h=[
19
19
]
obj='If
pag=7
prev=O1980
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1981
fatherSonIndex=0
frm_calc='"openssl dgst -sha256 -verify "+LRTrim(_pemfile)+" -signature "+LRTrim(_outfile)+" "+LRTrim(_deffile)
len=10
name='_command
next=Icpitembatch.CPVarDecl
frm_calc='Runtime.getRuntime().exec(_command)
name='_process
next=Icpitembatch.CPExec
check='man
frm_calc='// Stampa valori﷯exitVal = _process.waitFor();
next=Icpitembatch.CPIfElse
frm_calc=[
'exitVal=1
]
h=[
19
19
]
obj='If
pag=7
prev=O1988
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
comment='Variabile di ritorno
father=O1989
fatherSonIndex=0
frm_calc=''N'
len=1
name='cReturn
obj='Var
pag=7
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Exec
pag=7
prev=O1987
I
obj='Var
obj_type='O
pag=7
pagelocal=True
prev=O1986
var_op='asgn
I
obj='Var
obj_type='M
pag=7
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Exec
pag=7
prev=O1979
I
obj='Var
obj_type='O
pag=7
pagelocal=True
prev=O1978
var_op='asgn
I
obj='Var
obj_type='M
pag=7
pagelocal=True
prev=O1977
var_op='asgn
I
obj='Var
pag=7
pagelocal=True
prev=O1976
var_op='asgn
I
obj='Var
pag=7
pagelocal=True
var_op='asgn
I
I
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
comment='Variabile di ritorno
father=O1971
fatherSonIndex=1
frm_calc=''N'
len=1
name='cReturn
obj='Var
pag=7
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
150
]
I
obj='Var
pag=7
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Begin
pag=7
prev=O1879
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1881
fatherSonIndex=0
frm_calc='LRTrim(_gPathDoc)+"/VLT/"+LRTrim(_gAzienda)+"/"+LRTrim(pRow.NOMEDIR)+"/public.pem"
len=256
name='_pemfile
next=Icpitembatch.CPVarDecl
frm_calc='FileLibMit.OpenWritePath(_pemfile)
len=10
name='_fhand
next=Icpitembatch.CPExec
frm_calc='FileLibMit.WriteLine(_fhand,"-----BEGIN PUBLIC KEY-----")
next=Icpitembatch.CPExec
frm_calc='FileLibMit.WriteLine(_fhand,pRow.CRYPPTOKEY)
next=Icpitembatch.CPExec
frm_calc='FileLibMit.Write(_fhand,"-----END PUBLIC KEY-----")
next=Icpitembatch.CPExec
frm_calc='FileLibMit.Close(_fhand)
obj='Exec
pag=7
prev=O2007
I
obj='Exec
pag=7
prev=O2006
I
obj='Exec
pag=7
prev=O2005
I
obj='Exec
pag=7
prev=O2004
I
obj='Var
pag=7
pagelocal=True
prev=O2003
var_op='asgn
I
obj='Var
pag=7
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Begin
pag=7
prev=O1877
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
comment='Variabile di ritorno
father=O1879
fatherSonIndex=0
frm_calc=''S'
len=1
name='cReturn
obj='Var
pag=7
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Begin
pag=7
prev=O1875
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
comment='Variabile di ritorno
father=O1877
fatherSonIndex=0
len=1
name='cReturn
next=Icpitembatch.CPVarDecl
frm_seek='Process
name='_process
next=Icpitembatch.CPVarDecl
frm_seek='int
name='exitVal
next=Icpitembatch.CPVarDecl
len=256
name='_signedfile
next=Icpitembatch.CPVarDecl
len=256
name='_outfile
next=Icpitembatch.CPVarDecl
len=256
name='_pemfile
next=Icpitembatch.CPVarDecl
len=256
name='_deffile
next=Icpitembatch.CPVarDecl
len=10
name='_fhand
next=Icpitembatch.CPVarDecl
len=10
name='_command
obj='Var
obj_type='M
pag=7
pagelocal=True
prev=O2023
I
obj='Var
pag=7
pagelocal=True
prev=O2022
I
obj='Var
pag=7
pagelocal=True
prev=O2021
I
obj='Var
pag=7
pagelocal=True
prev=O2020
I
obj='Var
pag=7
pagelocal=True
prev=O2019
I
obj='Var
pag=7
pagelocal=True
prev=O2018
I
obj='Var
obj_type='O
pag=7
pagelocal=True
prev=O2017
I
obj='Var
obj_type='O
pag=7
pagelocal=True
prev=O2016
I
obj='Var
pag=7
pagelocal=True
I
I
]
w=[
150
150
]
I
obj='Begin
pag=7
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O1875
fatherSonIndex=0
frm_seek='rwCHECK.MCRDef
name='pRow
obj='Var
obj_type='R
pag=7
pageparam=True
I
I
]
w=[
150
150
]
x=22
y=19
I
Icpitembatch.CPBeginEnd
comment='Parametri
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Definizione variabili locali
h=[
19
19
]
next=Icpitembatch.CPBeginEnd
comment='Legge i dati dalla piattaforma e vede se tutti i precedenti sono stati fatti
h=[
19
19
]
next=Ispitembatch.CPReturn
frm_calc='cReturn
obj='Return
pag=8
page_return=True
prev=O2034
I
obj='Begin
pag=8
prev=O2032
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
comment='Variabile di ritorno
father=O2034
fatherSonIndex=0
frm_calc=''N'
len=1
name='cReturn
next=Icpitembatch.CPVarDecl
frm_calc='0
len=1
name='_trovato
next=Icpitembatch.CPVarDecl
frm_calc='arfn_dateminus(pDataImp,1)
len=8
name='_datachk
next=Icpitembatch.CPSelect
h=[
19
19
]
obj='Select
pag=8
prev=O2041
sel_field='*
sel_name='cgo_vlt_impdata
sel_where='cgo_vlt_impdata->VLTIMPCODPLAT=pCodPlat and cgo_vlt_impdata->VLTIMPDATE = _datachk
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPIfElse
father=O2042
fatherSonIndex=0
frm_calc=[
'cgo_vlt_impdata->VLTIMPFLAGOK1='S' and cgo_vlt_impdata->VLTIMPFLAGOK2='S' and cgo_vlt_impdata->VLTIMPFLAGOK3='S'
]
h=[
19
19
]
obj='If
pag=8
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
comment='Variabile di ritorno
father=O2046
fatherSonIndex=0
frm_calc=''S'
len=1
name='cReturn
next=Icpitembatch.CPVarDecl
frm_calc='1
len=1
name='_trovato
next=Icpitembatch.CPExitLoop
obj='ExitLoop
pag=8
prev=O2052
I
obj='Var
obj_type='N
pag=8
prev=O2051
var_op='asgn
I
obj='Var
pag=8
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
]
I
I
]
w=[
150
150
]
I
obj='Var
obj_type='D
pag=8
prev=O2040
var_op='asgn
I
obj='Var
obj_type='N
pag=8
prev=O2039
var_op='asgn
I
obj='Var
pag=8
pagelocal=True
var_op='asgn
I
I
]
w=[
150
150
]
I
obj='Begin
pag=8
prev=O2030
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
comment='Variabile di ritorno
father=O2032
fatherSonIndex=0
len=1
name='cReturn
next=Icpitembatch.CPVarDecl
len=8
name='_datachk
next=Icpitembatch.CPVarDecl
len=1
name='_trovato
obj='Var
obj_type='N
pag=8
prev=O2060
I
obj='Var
obj_type='D
pag=8
prev=O2059
I
obj='Var
pag=8
pagelocal=True
I
I
]
w=[
150
150
]
I
obj='Begin
pag=8
sons=[
Icpitembatch.CPItemSon
instr=Icpitembatch.CPVarDecl
father=O2030
fatherSonIndex=0
len=2
name='pCodPlat
next=Icpitembatch.CPVarDecl
len=8
name='pDataImp
obj='Var
obj_type='D
pag=8
pageparam=True
prev=O2065
I
obj='Var
pag=8
pageparam=True
I
I
]
w=[
150
150
]
x=14
y=18
I
]
ManualBlocks={
'BO - Header
Icpmanualblocks.CPManualBlocks
code='import java.io.*;﷯import java.util.List;﷯import com.opencsv.*;﷯// import com.opencsv.CSVReader;﷯// import com.opencsv.CSVReaderBuilder;﷯// import com.opencsv.CSVParser;﷯// import com.opencsv.CSVParserBuilder;
name='BO - Header
I
'BO - Properties
Icpmanualblocks.CPManualBlocks
code='String[] cmdArray = new String[10];
name='BO - Properties
I
}
comment='Import file vlt
date_creat=#2020-09-15
date_rev=#2024-02-28
dic_name='plan
ev_class='SPBatchEvents
libraries=[
'Utilities
'MailLibrary
'FileLibMit
]
merge=True
modcnt=157
page_result_class=[
'
'
'
'
'
'
'
'
]
page_result_type=[
'U
'U
'U
'U
'T
'D
'C
'C
]
page_uid=[
'DWOWHBEVYC
'BSTPMASKXF
'GYGTUNZEIQ
'UEXRGLMWAJ
'ZUIWWWPBFF
'GUYZUKYGNR
'STNPMETMEM
'PLIITEMBEM
]
pagename=[
'Page_1
'Sessioni
'BigliettiEmessi
'BigliettiConvalidati
'ConvDT
'ConvD
'CheckFiles
'CheckPrevFiles
]
pagenote=[
'
'
'
'
'
'
'
'
]
pagetitle=[
'Principale
'Sessioni
'Biglietti Emessi
'Biglietti Convalidati
'Crea Data Ora
'Crea Data da Data e Ora
'Controllo File Con chiave pubblica
'Controllo Import file precedenti
]
public=True
runtime_filters=2
tpl_name='Routine
work_file=[
'anadip
'cgo_telematico
'cgo_vlt_convalidati
'cgo_vlt_emessi
'cgo_vlt_impdata
'cgo_vlt_report
'cgo_vlt_sessioni
'cgo_vltplat
'cpazi
'destwarn
'intermbo
'cgo_vlt_scarti
]
work_filter=[
'
'
'
'
'
'
'
'
'
]
I
*--*
*----*
